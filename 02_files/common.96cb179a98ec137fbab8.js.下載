(self.miniJsonp=self.miniJsonp||[]).push([[8592],{88377:function(e,t,r){var n,o,c,u,a,s,i,f,E,p,l;e.exports=(n=r(34857),o=r(20573),c=r(29494),u=r(96961),a=r(6678),s=r(82677),i=r(38104),f=r(58518),E=r(44900),p=r(67429),l=r(36808),function(){"use strict";var e={701:function(e,t,r){r.d(t,{t:function(){return c}});var n=r(661),o=r.n(n),c=o().t.bind(o())},661:function(e){e.exports=f},598:function(e){e.exports=l},383:function(e){e.exports=s},252:function(e){e.exports=a},944:function(e){e.exports=n},975:function(e){e.exports=o},783:function(e){e.exports=i},644:function(e){e.exports=u},855:function(e){e.exports=c},672:function(e){e.exports=E},459:function(e){e.exports=p}},t={};function r(n){var o=t[n];if(void 0!==o)return o.exports;var c=t[n]={exports:{}};return e[n](c,c.exports,r),c.exports}r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,{a:t}),t},r.d=function(e,t){for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var S={};return function(){r.r(S),r.d(S,{addNeedCaptchaRequest:function(){return Bu},agentConversationEntitiesSelector:function(){return s},allMessageShortcutGroupsSelector:function(){return Bo},authorizedShopsCountSelector:function(){return we},autoTranslation:function(){return cc},batchRemoveDraftHandler:function(){return We},batchUpdateRecord:function(){return F},blockUserRequested:function(){return Cn},captchaSignatureSelector:function(){return fe},captchaVerifyReducer:function(){return na},captchaVisibleSelector:function(){return ie},checkUserPermissionSaga:function(){return qr},checkUserPermissionSucceeded:function(){return Fr},checkUserVerifyStatus:function(){return Wr},checkUserVerifyStatusRequested:function(){return Mr},checkUserVerifyStatusSucceed:function(){return Vr},clearNeedCaptchaRequest:function(){return Yu},clearReportRequested:function(){return Pu},contactsEntitiesSelector:function(){return h},conversationEntitiesSelector:function(){return a},conversationsLengthLevelSelector:function(){return O},copySucceedFeedback:function(){return bo},curTabFocusedSelector:function(){return Ce},currentAllMessageShortcutsSelector:function(){return $o},currentGroupIdSelector:function(){return Wo},currentGroupTypeSelector:function(){return qo},currentMessageShortcutGroupsSelector:function(){return zo},currentUserDistributionStatusSelector:function(){return Ae},currentUserIdSelector:function(){return J},currentUserIsSellerSelector:function(){return je},currentUserRoleSelector:function(){return De},currentUserSelector:function(){return Se},currentUserShopIdSelector:function(){return ge},currentUserShopSelector:function(){return Re},defaultPagination:function(){return _o},deleteCaptchaRequest:function(){return Ku},deleteConfigDurationSelector:function(){return ne},deleteConfigSelector:function(){return ae},deleteConversationSucceedHandler:function(){return Me},deleteRecord:function(){return L},displayCBCBannerSelector:function(){return ic},distributionAccountStatusSelector:function(){return sc},draftHashSelector:function(){return $c},entitiesSelector:function(){return c},entityReducer:function(){return W},fetchSettings:function(){return Oc},fetchSettingsStatusSelector:function(){return tu},fetchShopAuth:function(){return so},fetchShopAuthRequested:function(){return Gn},fetchShopDetailInfo:function(){return Wn},fetchShopSettings:function(){return lu},fetchShopTranslationSettings:function(){return su},fetchShopsByIds:function(){return ao},fetchShopsRequested:function(){return Fn},fetchUserOrderDetailRequested:function(){return Kt},fetchUserOrderDetailSucceeded:function(){return Yt},fetchedShopIdsSelector:function(){return kn},forceLogoutRequested:function(){return Ar},forwardGroupMembersSelector:function(){return D},forwardGroupsEntitiesSelector:function(){return R},getConversationLastMessage:function(){return it},getDraft:function(){return Zc},getGuide:function(){return Rt},getGuideFailed:function(){return ht},getGuideRequested:function(){return _t},getGuideSucceeded:function(){return Tt},getShopUnreadCountByIds:function(){return uo},getTimestamp:function(){return tt},getToastInformation:function(){return Do},handle401ErrorRequested:function(){return Vc},handleLoginSucceededLogic:function(){return Pr},handleMessageSubscribe:function(){return ze},hasDeletePermissionSelector:function(){return re},hasFetchedUnreadSelector:function(){return Ie},hasReplyPermissionSelector:function(){return te},hasVerifyPhoneNumberNormalSellerSelector:function(){return He},hasVerifyPhoneNumberSelector:function(){return ke},hasVerifyPhoneNumberSubaccountSelector:function(){return xe},hasVideoPermissionSelector:function(){return ee},hideFeedbackSelector:function(){return ue},isCBSellerSelector:function(){return Te},isMainPageSelector:function(){return be},isSubAccountSelector:function(){return _e},legacyMessageShortcutsCountSelector:function(){return ac},loadingSelector:function(){return X},localeSelector:function(){return de},login:function(){return vr},loginRequested:function(){return Or},loginSucceeded:function(){return gr},loginSuccessSelector:function(){return ve},logout:function(){return mn},logoutHandler:function(){return Un},logoutRequested:function(){return Rr},logoutSucceeded:function(){return Dr},messageEntitiesSelector:function(){return i},messageShortcutGroupEntitiesSelector:function(){return d},messageShortcutGroupHttpStatusSelector:function(){return Qo},messageShortcutGroupSelector:function(){return Vo},messageShortcutsSelector:function(){return ec},messageShortcutsStatusSelector:function(){return uc},messagesLengthLevelSelector:function(){return g},networkStatusSelector:function(){return Z},newMessageFlagSelector:function(){return pe},newbieSelector:function(){return $},notificationTypes:function(){return ft},offerSelector:function(){return Kc},offersSelector:function(){return Wc},openMallUrl:function(){return Lc},openMallUrlSaga:function(){return Gc},orderEntitiesSelector:function(){return E},personalMessageShortcutGroupsSelector:function(){return Ko},personalMessageShortcutsSelector:function(){return Xo},productEntitiesSelector:function(){return p},productsSelector:function(){return Au},pureActionHandler:function(){return $e},pureMergeActionHandler:function(){return Ze},rateCardEntitiesSelector:function(){return _},reduxReset:function(){return Yc},relatedOfferIdsSelector:function(){return Bc},removeSingleDraftHandler:function(){return qe},reportArraySelector:function(){return bu},reportMessageApiTimer:function(){return nt},reportReducer:function(){return Gu},reportRequested:function(){return mu},reportUserRequested:function(){return Pn},resendMessagePayloadSelector:function(){return Ee},resendNeedCaptchaRequest:function(){return zu},saveDraftHandler:function(){return Be},searchShopsRequested:function(){return qn},setChatListWidth:function(){return An},setTextBoxHeight:function(){return Dn},setToastInformation:function(){return Co},setToastInformationSaga:function(){return vo},settingsFetchStatusSelector:function(){return oc},settingsNeedForceUpdateSelectors:function(){return rc},settingsReducer:function(){return Hc},settingsSelector:function(){return tc},settingsStatusSelector:function(){return nc},shopReducer:function(){return Oo},shopSelector:function(){return xn},shopStatisticsMapSelector:function(){return he},shopStatisticsSelector:function(){return Oe},shopTranslationSettingsSelector:function(){return eu},shopsEntitiesSelector:function(){return T},shopsUnreadConversationCountSelector:function(){return B},showAutoHangupModalSelector:function(){return Ne},showChatWindowSelector:function(){return Pe},showConversationDetailSelector:function(){return me},showCrrDueSelector:function(){return ce},showEntrySelector:function(){return ye},showShop:function(){return Yn},showUser:function(){return $r},showUserRequested:function(){return Jr},sortConversations:function(){return et},sortedAllMessageShortcutsSelector:function(){return Zo},stickerEntitiesSelector:function(){return f},subaccountHasUnrepliedPermissionSelector:function(){return se},takeEveryWithCancel:function(){return aa},teamMessageShortcutGroupsSelector:function(){return Yo},teamMessageShortcutsSelector:function(){return Jo},textBoxHeightSelector:function(){return Ue},timerHandler:function(){return Nu},toastReducer:function(){return Mo},toastSelector:function(){return go},totalUnreadConversationsCountSelector:function(){return K},translatePreferenceReducer:function(){return du},unreadCountActions:function(){return Y},updateCaptchaSignature:function(){return _n},updateCaptchaSignatureSucceeded:function(){return Tn},updateCaptchaVisible:function(){return dn},updateChatEntryStatus:function(){return Zt},updateChatWindowStatus:function(){return Xt},updateConversationDetailStatus:function(){return Jt},updateConversationListsHash:function(){return Qc},updateCurTabFocused:function(){return on},updateCurTabFocusedSaga:function(){return un},updateCurTabFocusedSucceeded:function(){return cn},updateDelPermission:function(){return Gr},updateEntities:function(){return x},updateFetchStatus:function(){return fu},updateFetchedShopIds:function(){return Mn},updateGuide:function(){return jt},updateGuideRequested:function(){return It},updateGuideSucceeded:function(){return wt},updateHasFetchedUnread:function(){return er},updateIsMainPage:function(){return nn},updateLoginSuccessStatus:function(){return $t},updateNetworkStatus:function(){return Bt},updateOrReplaceAction:function(){return gu},updateRecord:function(){return k},updateSettingPreferenceStatus:function(){return Eu},updateSettingStatus:function(){return Sc},updateSettings:function(){return mc},updateSettingsRequested:function(){return _c},updateSettingsRequestedByType:function(){return dc},updateSettingsSucceeded:function(){return Tc},updateShopFilter:function(){return Vn},updateShopTranslationSettings:function(){return iu},updateShopTranslationSettingsRecord:function(){return pu},updateShowAutoHangupModal:function(){return zt},updateStatusSelector:function(){return ru},updateUserRequested:function(){return Wt},userEntitiesSelector:function(){return u},userReducer:function(){return Hn},userSelector:function(){return le},verifyRequestsSelector:function(){return ca},visitShopSellerCenterRequested:function(){return Qn},voucherEntitiesSelector:function(){return l},waitingTimeFilterSelector:function(){return oe},watchGuides:function(){return Dt},watchHandleUrlSagas:function(){return qc},watchLogin:function(){return yr},watchReportSagas:function(){return Fu},watchSettingsSagas:function(){return jc},watchShopSagas:function(){return To},watchShow:function(){return Zr},watchTab:function(){return an},watchToastSagas:function(){return Go},watchTranslationSagas:function(){return _u},watchTranslationSettings:function(){return Su},watchUpdate:function(){return nr},watchUpdateGuides:function(){return Ht},watchUserSagas:function(){return Nn},watchVerifySagas:function(){return oa}});var e=r(944),t=r(975),n=r(855),o=function(e){return e<=100?1:e<=500?2:e<=1e3?3:4},c=function(e){return e.entityReducer},u=(0,t.createSelector)(c,(function(e){return e.users})),a=(0,t.createSelector)(c,(function(e){return e.conversations})),s=(0,t.createSelector)(c,(function(e){return e.agentConversations})),i=(0,t.createSelector)(c,(function(e){return function(e){return(0,n.checkEmptyObject)(e)?{}:e}(e.messages)})),f=(0,t.createSelector)(c,(function(e){return e.stickers})),E=(0,t.createSelector)(c,(function(e){return e.orders})),p=(0,t.createSelector)(c,(function(e){return e.products})),l=(0,t.createSelector)(c,(function(e){return e.vouchers})),d=(0,t.createSelector)(c,(function(e){return e.messageShortcutsGroups})),_=(0,t.createSelector)(c,(function(e){return e.rateCards})),T=(0,t.createSelector)(c,(function(e){return e.shops})),h=(0,t.createSelector)(c,(function(e){return e.contacts})),O=(0,t.createSelector)(a,s,(function(e,t){var r=Object.keys(e).length+Object.keys(t).length;return o(r)})),g=(0,t.createSelector)(i,(function(e){return o(Object.keys(e).length)})),R=(0,t.createSelector)(c,(function(e){return e.groups})),D=(0,t.createSelector)(c,(function(e){return e.groupMembers}));function A(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function C(e,t){if(e){if("string"==typeof e)return b(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?b(e,t):void 0}}function U(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,c=[],u=!0,a=!1;try{for(r=r.call(e);!(u=(n=r.next()).done)&&(c.push(n.value),!t||c.length!==t);u=!0);}catch(e){a=!0,o=e}finally{try{u||null==r.return||r.return()}finally{if(a)throw o}}return c}}(e,t)||C(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var m,P=r(644);function v(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?v(Object(r),!0).forEach((function(t){A(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):v(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}!function(e){e.UPDATE_ENTITIES="UPDATE_ENTITIES",e.UPDATE_RECORD="UPDATE_RECORD",e.DELETE_RECORD="DELETE_RECORD",e.BATCH_UPDATE_RECORD="BATCH_UPDATE_RECORD"}(m||(m={}));var I,w,N=A({},m.UPDATE_ENTITIES,(function(e,t){var r=t.payload.entities;return Object.entries(r).reduce((function(e,t){var r=U(t,2),n=r[0],o=r[1];return"persist"!==n?("shops"===n&&P.shopService.updateShopMap(o),y(y({},e),{},A({},n,y(y({},e[n]),o)))):y(y({},e),{},A({},n,o))}),e)})),j=r(252),H=(0,j.createActions)((A(I={},m.UPDATE_ENTITIES,(function(e){return{entities:e.entities}})),A(I,m.UPDATE_RECORD,(function(e){return{name:e.name,id:e.id,record:e.record}})),A(I,m.DELETE_RECORD,(function(e){return{name:e.name,id:e.id}})),A(I,m.BATCH_UPDATE_RECORD,(function(e){return{name:e.name,records:e.records,checkProp:e.checkProp}})),I)),x=H.updateEntities,k=H.updateRecord,L=H.deleteRecord,F=H.batchUpdateRecord;function G(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function M(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?G(Object(r),!0).forEach((function(t){A(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):G(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var V=(A(w={},m.UPDATE_RECORD,(function(e,t){var r=t.payload,n=r.name,o=r.id,c=r.record;return M(M({},e),{},A({},n,M(M({},e[n]),{},A({},o,M(M({},e[n][o]),c)))))})),A(w,m.DELETE_RECORD,(function(e,t){var r=t.payload,n=r.name,o=r.id,c=e[n];return delete c[o],M(M({},e),{},A({},n,c))})),A(w,m.BATCH_UPDATE_RECORD,(function(e,t){var r=t.payload,n=r.name,o=r.records,c=r.checkProp,u=M({},e[n]);return Object.keys(o).forEach((function(e){(!c||c&&o[e][c]>u[e][c])&&(u[e]=M(M({},u[e]),o[e]))})),M(M({},e),{},A({},n,u))})),w);function Q(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function q(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Q(Object(r),!0).forEach((function(t){A(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Q(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var W=(0,j.handleActions)(q(q({},N),V),{users:{},messages:{},conversations:{},agentConversations:{},stickers:{},orders:{},offers:{},products:{},shops:{},rateCards:{},persist:null,vouchers:{},messageShortcuts:{}}),B=function(e){var t;return(null==e||null===(t=e.socketReducer)||void 0===t?void 0:t.shopsUnreadConversationCount)||0},K=function(e){var t;return(null==e||null===(t=e.socketReducer)||void 0===t?void 0:t.totalUnreadConversationsCount)||0},Y={MARK_AS_READ:"markAsRead",MARK_AS_UNREAD:"markASUnread",CLOSE_CONVERSATION:"closeConversation",DELETE_CONVERSATION:"deleteConversation",FORWARD_CONVERSATION:"forwardConversation",RECEIVE_UNREADABLE_MESSAGE:"receiveUnreadableMessage",REFRESH_TOTAL_UNREAD_CONVERSATION_COUNT:"refreshTotalUnreadConversationCount",REFRESH_SHOPS_UNREAD_CONVERSATIONS_COUNT:"refreshShopsUnreadConversationsCount",REFRESH_SINGLE_SHOP_UNREAD_CONVERSATION_COUNT:"refreshSingleShopUnreadConversationCount",UPDATE_CONVERSATION:"updateConversation",MESSAGE_QUEUE_UPDATE:"messageQueueUpdate",MASS_READ:"mass_read",MASS_UNREAD:"mass_unread",MASS_CLOSE:"mass_close",ACTIVE_CONVERSATION:"activeConversation",CLEAR_CONVERSATION_COUNT:"clearConversationCount"},z=r(383),X=function(e){return e.userReducer.loading},J=function(e){return e.userReducer.currentUserId},$=function(e){return e.userReducer.newbie},Z=function(e){return e.userReducer.networkStatus},ee=function(e){return e.userReducer.hasVideoPermission},te=function(e){return e.userReducer.hasReplyPermission},re=function(e){return e.userReducer.hasDeletePermission},ne=function(e){return e.userReducer.deleteConfigDuration},oe=function(e){return e.userReducer.waitingTimeFilter},ce=function(e){return e.userReducer.showCrrDue},ue=function(e){return e.userReducer.hideFeedback},ae=function(e){var t=e.userReducer;return{hasDeletePermission:t.hasDeletePermission,deleteConfigVersion:t.deleteConfigVersion,deleteConfigDuration:t.deleteConfigDuration}},se=function(e){return e.userReducer.subaccountHasUnrepliedPermission},ie=function(e){return e.userReducer.captchaVisible},fe=function(e){return e.userReducer.captchaSignature},Ee=function(e){return e.userReducer.resendMessagePayload},pe=function(e){return e.userReducer.newMessageFlag},le=function(e){return(0,t.createSelector)(c,(function(t){return(0,z.denormalize)(e,P.userSchema,{users:t})}))},Se=(0,t.createSelector)(u,J,(function(e,t){return(0,z.denormalize)(t,P.userSchema,{users:e})||{}})),de=(0,t.createSelector)(Se,(function(e){return e&&e.locale})),_e=(0,t.createSelector)(Se,(function(e){return!(0,n.checkEmptyObject)(e)&&e.type===n.AccountType.SUBACCOUNT})),Te=(0,t.createSelector)(Se,(function(e){return!(0,n.checkEmptyObject)(e)&&e.is_cb})),he=function(e){return e.userReducer.shopStatisticsMap},Oe=function(e,r){return(0,t.createSelector)(he,(function(t){return t["".concat(e,"-").concat(r)]||{}}))},ge=(0,t.createSelector)(Se,_e,(function(){return(arguments.length>1?arguments[1]:void 0)?void 0:(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).shop_id})),Re=(0,t.createSelector)(Se,_e,T,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>2?arguments[2]:void 0;return(arguments.length>1?arguments[1]:void 0)?void 0:(0,z.denormalize)(e.shop_id,P.shopSchema,{shops:t})||{}})),De=(0,t.createSelector)(Se,(function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).role||""})),Ae=(0,t.createSelector)(Se,(function(e){return e&&e.distribution_status||""})),be=function(e){return e.userReducer.isMainPage},Ce=function(e){return e.userReducer.curTabFocused},Ue=function(e){return e.userReducer.textBoxHeight},me=function(e){return e.userReducer.showConversationDetail},Pe=function(e){return e.userReducer.showChatWindow},ve=function(e){return e.userReducer.loginSuccess},ye=function(e){return e.userReducer.showEntry},Ie=function(e){return e.userReducer.hasFetchedUnread},we=(0,t.createSelector)(Se,(function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).authorizedShopsCount||0})),Ne=function(e){return e.userReducer.showAutoHangupModal},je=(0,t.createSelector)(Se,_e,(function(){return!!(arguments.length>1?arguments[1]:void 0)||(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).is_seller})),He=function(e){return e.userReducer.hasVerifyPhoneNumber},xe=function(e){return e.userReducer.hasVerifyPhoneNumberMap},ke=(0,t.createSelector)(_e,He,xe,(function(e,t,r){return e?r:t}));function Le(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Fe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Le(Object(r),!0).forEach((function(t){A(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Le(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Ge=function(e,t){var r=new Set(t);return r.delete(e),Array.from(r)},Me=function(e,t){var r=t.payload.conversationId,n=Fe(Fe({},e.conversationIdsMap),{},A({},r,!1)),o=Ge(r,e.conversationIds),c=Ge(r,e.pinnedConversationIds),u=e.currentConversationId;return Fe(Fe({},e),{},{currentConversationId:u===r?null:u,conversationIds:o,pinnedConversationIds:c,conversationIdsMap:n})};function Ve(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Qe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ve(Object(r),!0).forEach((function(t){A(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ve(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var qe=function(e,t){var r=t.payload.conversationId,n=Qe({},e.draftHash);return delete n[r],Qe(Qe({},e),{},{draftHash:n})},We=function(e,t){var r=t.payload.conversationIds,n=void 0===r?[]:r,o=Qe({},e.draftHash);return n.forEach((function(e){delete o[e]})),Qe(Qe({},e),{},{draftHash:o})},Be=function(e,t){var r=t.payload,n=r.conversationId,o=r.draft,c=Qe({},e.draftHash);return c[n]=o,Qe(Qe({},e),{},{draftHash:c})},Ke=r(783),Ye=regeneratorRuntime.mark(ze);function ze(t){var r,o;return regeneratorRuntime.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return r=t.payload,o=t.type,c.next=3,(0,e.spawn)(nt,r.request_id);case 3:if(o!==n.ConversationTypeEnum.Agent){c.next=8;break}return c.next=6,(0,e.put)((0,Ke.receiveAgentMessageRequested)({message:r}));case 6:c.next=10;break;case 8:return c.next=10,(0,e.put)((0,Ke.receiveMessageRequested)({message:r}));case 10:case"end":return c.stop()}}),Ye)}function Xe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Je(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Xe(Object(r),!0).forEach((function(t){A(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Xe(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var $e=function(){return function(e,t){var r=t.payload;return Je(Je({},e),r)}},Ze=function(e){return function(t,r){var n=r.payload;return Je(Je({},t),{},A({},e,Je(Je({},t[e]),n)))}},et=function(e){e.sort((function(e,t){return parseInt(t.latest_message_id)-parseInt(e.latest_message_id)}))},tt=function(e,t){var r=e.last_message_time_nano,n=e.next_timestamp_nano;return t&&!n&&(n=t.next_message_time_nano),{nextTimestampNano:n,oldestTimestampNano:n,latestTimestampNano:r}},rt=regeneratorRuntime.mark(nt);function nt(e){var t,r,o;return regeneratorRuntime.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,(0,n.getItem)(e);case 2:(t=c.sent)&&(r=new Date,o=+r-+t,(0,P.collectAsyncTask)(P.ReportPoint.MESSAGE_SOCKET,o),(0,n.removeItem)(e));case 4:case"end":return c.stop()}}),rt)}var ot,ct,ut,at=r(701).t,st=n.MessageTypes.MSG_TYPE_TEXT,it=function(e,t,r){var o=e.all||[],c=e.sending||[],u=e.failed||[],a=o.length,s=null;if(a){for(var i=0,f=null;i<a&&!f;){var E=e.all[i];(f=(0,z.denormalize)(E,P.messageSchema,{messages:r}))&&(f.type===n.MessageTypes.MSG_TYPE_SECURITY_TIPS||f.isFaking)&&(f=null),i++}f&&f.created_timestamp>Math.floor(t.last_message_time_nano/Math.pow(10,9))&&(s=(0,n.fillMessagePreview)(f))}if(!s){var p=t.latest_message_id,l=t.latest_message_content,S=t.latest_message_type,d=t.last_message_option,_=t.latest_message_source,T=t.last_message_time_nano;(s={id:p,content:l,type:S,message_option:d,source:_,to_shop_id:t.latest_message_to_shop_id}).created_at=new Date(T/1e6)+""}var h=s,O=h.id,g=h.message_option,R=c.includes(O)?n.MessageSendStatus.SENDING:u.includes(O)?n.MessageSendStatus.FAILED:s.send_status?n.MessageSendStatus.SUCCEED:null;return(0,n.hasTargetMessageOption)(g,n.MessageOption.MSG_OPT_CENSORED_BLACKLIST)&&(R=n.MessageSendStatus.FAILED,s.type=st,s.content={text:at("common.blacklist.replaced_text")}),(0,n.hasTargetMessageOption)(g,n.MessageOption.MSG_OPT_CANCELORDER_WARNING_NOT_SEND)&&(R=n.MessageSendStatus.FAILED),s.send_status=R,s},ft={MARK_AS_READ:"mark_as_read",MARK_AS_UNREAD:"mark_as_unread",DELETE_CONVERSATION:"delete_conversation",UPDATE_OFFER_STATUS:"update_offer_status",UPDATE_CONVERSATION:"update_conversation",UPDATE_USER_STATUS:"update_user_status",UPDATE_CONVERSATION_FLAG:"update_conversation_flag",FORCE_LOGOUT:"force_logout",UPDATE_RATING_CARD_STATUS:"update_rating_card_status",PULL_NOTIFICATION:"pull_notification",PIN_CONVERSATION:"pin_conversation",UNPIN_CONVERSATION:"unpin_conversation",MASS_READ:"mass_read",MASS_UNREAD:"mass_unread",MASS_PIN:"mass_pin",MASS_UNPIN:"mass_unpin",MASS_CLOSE:"mass_close",MASS_ACTIVATE:"mass_activate",VIDEO_UPLOAD:"video_upload",MARK_AS_REPLIED:"mark_as_replied",MARK_AS_UNREPLIED:"mark_as_unreplied",CHAT_DELETE_MSG:"chat_delete_msg",FAQ_SESSION_UPDATE:"faq_session_update",MUTE_CONVERSATION:"mute_conversation",UNMUTE_CONVERSATION:"unmute_conversation",CTT_UPDATE:"ctt_update",HAVE_UNRATED_CSAT:"have_unrated_csat"};function Et(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function pt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Et(Object(r),!0).forEach((function(t){A(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Et(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}!function(e){e.BLOCK_USER_REQUESTED="BLOCK_USER_REQUESTED",e.CHECK_USER_PERMISSION_SUCCEEDED="CHECK_USER_PERMISSION_SUCCEEDED",e.CLOSE_HANGUP_TIPS_REQUESTED="CLOSE_HANGUP_TIPS_REQUESTED",e.GET_GUIDE_REQUESTED="GET_GUIDE_REQUESTED",e.GET_GUIDE_SUCCEEDED="GET_GUIDE_SUCCEEDED",e.GET_GUIDE_FAILED="GET_GUIDE_FAILED",e.SHOW_LOADING_SUCCEEDED="SHOW_LOADING_SUCCEEDED",e.SET_HAS_SESSION="SET_HAS_SESSION",e.SHOW_USER_REQUESTED="SHOW_USER_REQUESTED",e.FETCH_USER_ORDER_DETAIL_REQUESTED="FETCH_USER_ORDER_DETAIL_REQUESTED",e.FETCH_USER_ORDER_DETAIL_SUCCEEDED="FETCH_USER_ORDER_DETAIL_SUCCEEDED",e.FETCH_USER_PERFORMANCE_REQUESTED="FETCH_USER_PERFORMANCE_REQUESTED",e.FETCH_USER_PERFORMANCE_SUCCEED="FETCH_USER_PERFORMANCE_SUCCEED",e.UPDATE_USER_REQUESTED="UPDATE_USER_REQUESTED",e.UPDATE_NETWORK_STATUS="UPDATE_NETWORK_STATUS",e.UPDATE_CUR_TAB_FOCUSED="UPDATE_CUR_TAB_FOCUSED",e.UPDATE_CUR_TAB_FOCUSED_SUCCEEDED="UPDATE_CUR_TAB_FOCUSED_SUCCEEDED",e.UPDATE_WORKSTATION_PANEL="UPDATE_WORKSTATION_PANEL",e.UPDATE_NEW_MESSAGE_FLAG="UPDATE_NEW_MESSAGE_FLAG",e.UPDATE_CHAT_WINDOW_STATUS="UPDATE_CHAT_WINDOW_STATUS",e.UPDATE_CONVERSATION_DETAIL_STATUS="UPDATE_CONVERSATION_DETAIL_STATUS",e.UPDATE_LOGIN_SUCCESS_STATUS="UPDATE_LOGIN_SUCCESS_STATUS",e.UPDATE_CHAT_ENTRY_STATUS="UPDATE_CHAT_ENTRY_STATUS",e.UPDATE_GUIDE_REQUESTED="UPDATE_GUIDE_REQUESTED",e.UPDATE_GUIDE_SUCCEEDED="UPDATE_GUIDE_SUCCEEDED",e.LOGIN_REQUESTED="LOGIN_REQUESTED",e.LOGIN_SUCCEEDED="LOGIN_SUCCEEDED",e.LOGOUT_REQUESTED="LOGOUT_REQUESTED",e.LOGOUT_SUCCEEDED="LOGOUT_SUCCEEDED",e.UPDATE_LOGIN_STATUS="UPDATE_LOGIN_STATUS",e.SHOW_TRANSLATION_GUIDE="SHOW_TRANSLATION_GUIDE",e.SHOW_REGION_FILTER_GUIDE="SHOW_REGION_FILTER_GUIDE",e.FORCE_LOGOUT_REQUESTED="FORCE_LOGOUT_REQUESTED",e.CONNECT_SOCKET="CONNECT_SOCKET",e.REPORT_ASYNC_TASK="REPORT_ASYNC_TASK",e.UPLOAD_FEEDBACK_VIDEO_REQUESTED="UPLOAD_FEEDBACK_VIDEO_REQUESTED",e.UPLOAD_FEEDBACK_VIDEO_STATUS="UPLOAD_FEEDBACK_VIDEO_STATUS",e.UPDATE_CAPTCHA_VISIBLE="UPDATE_CAPTCHA_VISIBLE",e.UPDATE_CAPTCHA_SIGNATURE="UPDATE_CAPTCHA_SIGNATURE",e.UPDATE_CAPTCHA_SIGNATURE_SUCCEEDED="UPDATE_CAPTCHA_SIGNATURE_SUCCEEDED",e.SET_TEXT_BOX_HEIGHT="SET_TEXT_BOX_HEIGHT",e.UPDATE_RELATED_CAPACITY="UPDATE_RELATED_CAPACITY",e.UPDATE_IS_MAIN_PAGE="UPDATE_IS_MAIN_PAGE",e.UPDATE_DEL_PERMISSION="UPDATE_DEL_PERMISSION",e.UPDATE_SHOW_AUTO_HANGUP_MODAL="UPDATE_SHOW_AUTO_HANGUP_MODAL",e.REPORT_USER_REQUESTED="REPORT_USER_REQUESTED",e.SET_CHAT_LIST_WIDTH="SET_CHAT_LIST_WIDTH",e.UPDATE_HAS_FETCHED_UNREAD="UPDATE_HAS_FETCHED_UNREAD",e.CHECK_USER_VERIFY_STATUS_REQUESTED="CHECK_USER_VERIFY_STATUS_REQUESTED",e.CHECK_USER_VERIFY_STATUS_SUCCEED="CHECK_USER_VERIFY_STATUS_SUCCEED"}(ot||(ot={}));var lt=regeneratorRuntime.mark(Rt),St=regeneratorRuntime.mark(Dt),dt=(0,j.createActions)((A(ct={},ot.GET_GUIDE_REQUESTED,(function(e){return{userId:e.userId,version:e.version}})),A(ct,ot.GET_GUIDE_SUCCEEDED,(function(e){return{newbie:e.newbie}})),A(ct,ot.GET_GUIDE_FAILED,(function(){return{}})),ct)),_t=dt.getGuideRequested,Tt=dt.getGuideSucceeded,ht=dt.getGuideFailed,Ot=1,gt="newbie-completed-info";function Rt(t){var r,o,c,u,a,s,i;return regeneratorRuntime.wrap((function(f){for(;;)switch(f.prev=f.next){case 0:return r=t.payload,o=r.userId,c=r.version,f.prev=1,f.next=4,(0,n.getItem)(gt);case 4:if(f.sent!=="".concat(o,"-").concat(c)){f.next=7;break}return f.abrupt("return",[]);case 7:return u=[Ot],f.next=10,(0,e.call)(P.fetch,{resource:"newbie",suffix:"uncompleted",params:{chat_types:"[".concat(u.join(","),"]")}});case 10:return a=f.sent,s=a.newbie,i=void 0===s?[]:s,f.next=15,(0,e.put)(Tt({newbie:i}));case 15:if(!(i.findIndex((function(e){return(e.name||"").toLocaleLowerCase().includes("mini")}))<0)){f.next=19;break}return f.next=19,(0,n.setItem)(gt,"".concat(o,"-").concat(c));case 19:return f.abrupt("return",i);case 22:return f.prev=22,f.t0=f.catch(1),f.next=26,(0,e.put)(ht());case 26:return f.abrupt("return",[]);case 27:case"end":return f.stop()}}),lt,null,[[1,22]])}function Dt(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,e.takeEvery)(_t,Rt);case 2:case"end":return t.stop()}}),St)}var At,bt=(A(ut={},ot.GET_GUIDE_SUCCEEDED,$e()),A(ut,ot.GET_GUIDE_FAILED,(function(e){return pt(pt({},e),{},{newbie:[]})})),ut);function Ct(e){return function(e){if(Array.isArray(e))return b(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||C(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Ut=regeneratorRuntime.mark(jt),mt=regeneratorRuntime.mark(Ht);function Pt(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return vt(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?vt(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var c,u=!0,a=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return u=e.done,e},e:function(e){a=!0,c=e},f:function(){try{u||null==r.return||r.return()}finally{if(a)throw c}}}}function vt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var yt=(0,j.createActions)((A(At={},ot.UPDATE_GUIDE_REQUESTED,(function(e){return{newbieId:e.newbieId}})),A(At,ot.UPDATE_GUIDE_SUCCEEDED,(function(e){return{newbie:e.newbie}})),At)),It=yt.updateGuideRequested,wt=yt.updateGuideSucceeded;function Nt(e,t){var r,n=Ct(e),o=Pt(n);try{for(o.s();!(r=o.n()).done;){var c=r.value,u=c.children.findIndex((function(e){return e.id===t}));if(-1!==u){c.children.splice(u,1);break}}}catch(e){o.e(e)}finally{o.f()}return n}function jt(t){var r,n,o;return regeneratorRuntime.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return r=t.payload.newbieId,c.next=3,(0,e.select)($);case 3:return n=c.sent,o=Nt(n,r),c.next=7,(0,e.put)(wt({newbie:o}));case 7:return c.prev=7,c.next=10,(0,e.call)(P.fetch,{method:"PUT",resource:"newbie",id:r});case 10:c.next=14;break;case 12:c.prev=12,c.t0=c.catch(7);case 14:case"end":return c.stop()}}),Ut,null,[[7,12]])}function Ht(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,e.takeEvery)(It,jt);case 2:case"end":return t.stop()}}),mt)}var xt,kt,Lt=A({},ot.UPDATE_GUIDE_SUCCEEDED,$e());function Ft(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Gt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ft(Object(r),!0).forEach((function(t){A(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ft(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Mt=regeneratorRuntime.mark(tr),Vt=regeneratorRuntime.mark(rr),Qt=regeneratorRuntime.mark(nr),qt=(0,j.createActions)((A(xt={},ot.UPDATE_USER_REQUESTED,(function(e){return{status:e.status}})),A(xt,ot.UPDATE_NETWORK_STATUS,(function(e){return{networkStatus:e.networkStatus}})),A(xt,ot.FETCH_USER_ORDER_DETAIL_REQUESTED,(function(e){return{userId:e.userId,shopId:e.shopId}})),A(xt,ot.FETCH_USER_ORDER_DETAIL_SUCCEEDED,(function(e){return{userId:e.userId,shopId:e.shopId,data:e.data}})),A(xt,ot.UPDATE_SHOW_AUTO_HANGUP_MODAL,(function(e){return{showAutoHangupModal:e.showAutoHangupModal}})),A(xt,ot.UPDATE_CHAT_WINDOW_STATUS,(function(e){return{showChatWindow:e.showChatWindow}})),A(xt,ot.UPDATE_CONVERSATION_DETAIL_STATUS,(function(e){return{showConversationDetail:e.showConversationDetail}})),A(xt,ot.UPDATE_LOGIN_SUCCESS_STATUS,(function(e){return{loginSuccess:e.loginSuccess}})),A(xt,ot.UPDATE_CHAT_ENTRY_STATUS,(function(e){return{showEntry:e.showEntry}})),A(xt,ot.UPDATE_HAS_FETCHED_UNREAD,(function(e){return{hasFetchedUnread:e.hasFetchedUnread}})),xt)),Wt=qt.updateUserRequested,Bt=qt.updateNetworkStatus,Kt=qt.fetchUserOrderDetailRequested,Yt=qt.fetchUserOrderDetailSucceeded,zt=qt.updateShowAutoHangupModal,Xt=qt.updateChatWindowStatus,Jt=qt.updateConversationDetailStatus,$t=qt.updateLoginSuccessStatus,Zt=qt.updateChatEntryStatus,er=qt.updateHasFetchedUnread;function tr(t){var r;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=t.payload.status,n.prev=1,n.next=4,(0,e.call)(P.fetch,{method:"PUT",resource:"user",payload:JSON.stringify({distribution_status:r})});case 4:n.next=9;break;case 9:n.next=15;break;case 11:return n.prev=11,n.t0=n.catch(1),n.next=15,(0,e.put)(Co({error:n.t0}));case 15:case"end":return n.stop()}}),Mt,null,[[1,11]])}function rr(t){var r,n,o,c;return regeneratorRuntime.wrap((function(u){for(;;)switch(u.prev=u.next){case 0:return r=t.payload,n=r.userId,o=r.shopId,u.prev=1,u.next=4,(0,e.call)(P.fetch,{parent:"users",parentId:n,resource:"get_user_shop_statistics_info",params:{shop_id:o}});case 4:return c=u.sent,u.next=7,(0,e.put)(Yt({userId:n,shopId:o,data:c}));case 7:u.next=11;break;case 9:u.prev=9,u.t0=u.catch(1);case 11:case"end":return u.stop()}}),Vt,null,[[1,9]])}function nr(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,e.takeEvery)(Wt,tr);case 2:return t.next=4,(0,e.takeEvery)(Kt,rr);case 4:case"end":return t.stop()}}),Qt)}var or,cr,ur=(A(kt={},ot.UPDATE_NETWORK_STATUS,$e()),A(kt,ot.FETCH_USER_ORDER_DETAIL_SUCCEEDED,(function(e,t){var r=t.payload,n=r.userId,o=r.shopId,c=r.data,u="".concat(n,"-").concat(o),a=e.shopStatisticsMap;return Gt(Gt({},e),{},{shopStatisticsMap:Gt(Gt({},a),{},A({},u,c))})})),A(kt,ot.UPDATE_SHOW_AUTO_HANGUP_MODAL,$e()),A(kt,ot.UPDATE_CHAT_WINDOW_STATUS,$e()),A(kt,ot.UPDATE_CONVERSATION_DETAIL_STATUS,$e()),A(kt,ot.UPDATE_LOGIN_SUCCESS_STATUS,$e()),A(kt,ot.UPDATE_CHAT_ENTRY_STATUS,$e()),A(kt,ot.UPDATE_HAS_FETCHED_UNREAD,$e()),kt),ar=r(672),sr=r(459),ir=r(598),fr=r.n(ir);function Er(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function pr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Er(Object(r),!0).forEach((function(t){A(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Er(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var lr=regeneratorRuntime.mark(br),Sr=regeneratorRuntime.mark(Cr),dr=regeneratorRuntime.mark(Pr),_r=regeneratorRuntime.mark(vr),Tr=regeneratorRuntime.mark(yr),hr=(0,j.createActions)((A(or={},ot.LOGIN_REQUESTED,(function(){return{}})),A(or,ot.LOGIN_SUCCEEDED,(function(e){return{currentUserId:e.currentUserId,status:e.status}})),A(or,ot.LOGOUT_REQUESTED,(function(){return{}})),A(or,ot.LOGOUT_SUCCEEDED,(function(){return{}})),A(or,ot.FORCE_LOGOUT_REQUESTED,(function(){return{}})),or)),Or=hr.loginRequested,gr=hr.loginSucceeded,Rr=hr.logoutRequested,Dr=hr.logoutSucceeded,Ar=hr.forceLogoutRequested;function br(t){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,(0,e.call)(n.getItem,t);case 2:if(r.sent){r.next=6;break}return r.next=6,(0,e.call)(n.setItem,t,(0,sr.v4)());case 6:case"end":return r.stop()}}),lr)}function Cr(){var t,r;return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return t=(0,n.getTranslationLocale)((0,n.getRuntimeLocale)()),o.next=3,(0,e.call)(P.getTranslation,{locale:t});case 3:return r=o.sent,o.next=6,(0,e.call)(n.changeLanguage,t,r);case 6:case"end":return o.stop()}}),Sr)}var Ur=regeneratorRuntime.mark((function t(r){var o,c,u,a,s,i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(u=window.__CHATEASY_TRANSLATION__,(0,n.checkEmptyObject)(u)||(0,n.checkEmptyObject)(u.collection)?((s=fr().get("language"))?c=n.localeInMallToTspLocale[s]||"en":(i=n.defaultLocalInMall[(0,n.getRuntimeRegion)()]||"en",c=n.localeInMallToTspLocale[i]||"en"),(0,P.collectAsyncTask)(P.ReportPoint.TRANSLATION_IN_SERVICE,0)):((0,P.collectAsyncTask)(P.ReportPoint.TRANSLATION_IN_HTML,0),a={},Object.keys(u.collection).forEach((function(e){a=Object.assign(a,u.collection[e])})),o=a,c=window.__CHATEASY_LOCALE__),o){t.next=14;break}return t.prev=3,t.next=6,(0,e.call)(P.getTranslation,{locale:c});case 6:o=t.sent,t.next=14;break;case 9:return t.prev=9,t.t0=t.catch(3),t.next=13,(0,e.call)(P.getTranslation,{locale:(0,n.getTranslationLocale)((0,n.getRuntimeLocale)())});case 13:o=t.sent;case 14:return t.next=16,(0,e.call)(n.changeLanguage,c,o);case 16:return t.next=18,(0,e.call)(n.updateTimeLocale,(0,n.getServiceLocale)(c));case 18:case"end":return t.stop()}}),t,null,[[3,9]])})),mr=regeneratorRuntime.mark((function t(r){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,e.call)(Cr);case 2:return t.next=4,(0,e.put)(Zt({showEntry:!0}));case 4:return t.next=6,(0,e.put)($t({loginSuccess:!1}));case 6:(0,P.collectAsyncTask)(P.ReportPoint.LOGIN_FAILED,0,{type:(n=r,n instanceof P.InternalServerError?"InternalServerError":n instanceof P.Forbidden?"Forbidden":n instanceof P.Unauthoried?"Unauthoried":"Other")});case 7:case"end":return t.stop()}var n}),t)}));function Pr(t,r){var o,c,u,a,s,i,f,E,p;return regeneratorRuntime.wrap((function(l){for(;;)switch(l.prev=l.next){case 0:return l.prev=0,o=r.godToken,c=t.user,u=c.id,a=c.type,s=c.locale,i=c.distribution_status,f=a===n.AccountType.SUBACCOUNT,window.__WEBCHAT_LOGIN__||f&&"working"===i&&(window.__WEBCHAT_LOGIN__=!0),l.next=8,(0,e.call)(Ur,s||"en");case 8:return performance.mark("APP_RENDERING"),(0,P.collectLoadTask)(),(0,P.mdapConfig)(a),(0,P.configTrackerUser)(c),l.next=14,(0,e.put)(Bt({networkStatus:"online"}));case 14:return window.addEventListener("online",(function(){ar.store.dispatch(Bt({networkStatus:"online"}))})),window.addEventListener("offline",(function(){ar.store.dispatch(Bt({networkStatus:"offline"}))})),window.addEventListener("message",(function(e){var t;if("captcha-modal"===(null===(t=e.data)||void 0===t?void 0:t.type)){var r,o,c,u;if(3===(null===(r=e.data)||void 0===r?void 0:r.status)){var a,s,i;console.log("==== event.data",e);var f=null===(a=e.data)||void 0===a?void 0:a.AC_CERT_D;f&&(0,n.isVisitingCn)()&&fr().set("AC_CERT_D",f,{secure:!0,domain:"".concat(window.location.host),expires:new Date((new Date).getTime()+6e4)}),ar.store.dispatch(zu()),null===(s=(i=window).closeSFUCaptchaModal)||void 0===s||s.call(i)}1===(null===(o=e.data)||void 0===o?void 0:o.status)&&(ar.store.dispatch(Ku()),null===(c=(u=window).closeSFUCaptchaModal)||void 0===c||c.call(u))}}),!1),l.next=19,(0,e.put)($t({loginSuccess:!0}));case 19:return l.next=21,(0,e.put)(Zt({showEntry:!0}));case 21:return E=(0,P.normalize)("users",c),p=E.entities,l.next=24,(0,e.put)(x({entities:p}));case 24:if(o){l.next=27;break}return l.next=27,(0,e.call)(Ke.startConnect);case 27:return l.next=29,(0,e.put)(gr({currentUserId:u}));case 29:return l.next=31,(0,e.call)(qr);case 31:return l.next=33,(0,e.spawn)(br,"device_id");case 33:if(f){l.next=36;break}return l.next=36,(0,e.call)(lu,su({shopId:c.shop_id}));case 36:l.next=42;break;case 38:return l.prev=38,l.t0=l.catch(0),l.next=42,(0,e.call)(mr,l.t0);case 42:return l.prev=42,l.finish(42);case 44:case"end":return l.stop()}}),dr,null,[[0,38,42,44]])}function vr(){var t,r,o,c;return regeneratorRuntime.wrap((function(u){for(;;)switch(u.prev=u.next){case 0:if(u.prev=0,performance.mark("APP_PREPARED"),t={},r="",!window.__WEBCHAT_SESSION__){u.next=9;break}(0,P.collectAsyncTask)(P.ReportPoint.LOGIN_IN_HTML,0),t=window.__WEBCHAT_SESSION__,u.next=17;break;case 9:return(0,P.collectAsyncTask)(P.ReportPoint.LOGIN_IN_SERVICE,0),o={method:"POST",subServer:"coreapi",resource:"login"},c=(0,n.isVisitingCNSC)()||(0,n.isVisitingKRSC)(),o.params={source:"pcmall"},c&&(o.parent="cbsc"),u.next=16,(0,e.call)(P.fetch,o);case 16:t=u.sent;case 17:return performance.mark("LOGIN_API_RESPONSED"),u.next=20,(0,n.setItem)("mini-session",t);case 20:return n.LS.setItem("mini-session",JSON.stringify(t)),u.abrupt("return",{session:t,params:{godToken:r}});case 24:return u.prev=24,u.t0=u.catch(0),u.next=28,(0,e.call)(mr,u.t0);case 28:return u.prev=28,u.finish(28);case 30:case"end":return u.stop()}}),_r,null,[[0,24,28,30]])}function yr(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,e.takeLatest)(Or,vr);case 2:return t.next=4,(0,e.takeLatest)(Rr,mn);case 4:return t.next=6,(0,e.takeLatest)(Ar,Un);case 6:case"end":return t.stop()}}),Tr)}var Ir,wr,Nr=(A(cr={},ot.LOGIN_SUCCEEDED,$e()),A(cr,ot.LOGOUT_SUCCEEDED,(function(e){return pr(pr({},e),{},{currentUserId:null,performance:{},closeHangupTips:!1,hasVideoPermission:!1,captchaVisible:!1,curTabFocused:!0})})),cr),jr=regeneratorRuntime.mark(qr),Hr=regeneratorRuntime.mark(Wr);function xr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function kr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?xr(Object(r),!0).forEach((function(t){A(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):xr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Lr=(0,j.createActions)((A(Ir={},ot.CHECK_USER_PERMISSION_SUCCEEDED,(function(e){return{hasVideoPermission:e.hasVideoPermission,hasReplyPermission:e.hasReplyPermission,hasDeletePermission:e.hasDeletePermission,deleteConfigDuration:e.deleteConfigDuration,deleteConfigVersion:e.deleteConfigVersion,waitingTimeFilter:e.waitingTimeFilter,subaccountHasUnrepliedPermission:e.subaccountHasUnrepliedPermission,showCrrDue:e.showCrrDue,hideFeedback:e.hideFeedback}})),A(Ir,ot.UPDATE_DEL_PERMISSION,(function(e){return{hasDeletePermission:e.hasDeletePermission,deleteConfigDuration:e.deleteConfigDuration,deleteConfigVersion:e.deleteConfigVersion}})),A(Ir,ot.CHECK_USER_VERIFY_STATUS_REQUESTED,(function(){return{}})),A(Ir,ot.CHECK_USER_VERIFY_STATUS_SUCCEED,(function(e){return{hasVerifyPhoneNumber:e.hasVerifyPhoneNumber,shopId:e.shopId,isSubAccount:e.isSubAccount}})),Ir)),Fr=Lr.checkUserPermissionSucceeded,Gr=Lr.updateDelPermission,Mr=Lr.checkUserVerifyStatusRequested,Vr=Lr.checkUserVerifyStatusSucceed,Qr={hasVideoPermission:!1,hasReplyPermission:!1,hasDeletePermission:!1,deleteConfigDuration:0,deleteConfigVersion:0,waitingTimeFilter:!1,showCrrDue:!1,hideFeedback:!1};function qr(){var t,r,n,o,c,u,a,s,i,f,E,p,l,S,d,_,T,h;return regeneratorRuntime.wrap((function(O){for(;;)switch(O.prev=O.next){case 0:return O.next=2,(0,e.select)(Se);case 2:return t=O.sent,r=t.type,n=t.country,O.prev=4,O.next=7,(0,e.call)(P.fetch,{subServer:"coreapi",parent:"user",resource:"global_config"});case 7:return o=O.sent,u=(c=o||{}).video,a=c.reply,s=c.waiting_time_filter,i=c.show_crr_due,f=c.delete_msg,E=c.support_subaccount_unreplied,p=c.hide_feedback,(l=kr(kr({},Qr),{},{hasVideoPermission:u,hasReplyPermission:a,waitingTimeFilter:s,showCrrDue:i,hideFeedback:p})).waitingTimeFilter=!1,"seller"===r?(d=(S=f||{}).config_version,_=S.region_config,T=void 0===_?[]:_,l.deleteConfigVersion=d,(h=T.find((function(e){return e.region===n})))&&h.duration&&(l.hasDeletePermission=!0,l.deleteConfigDuration=h.duration)):l.subaccountHasUnrepliedPermission=E,O.next=14,(0,e.put)(Fr(kr({},l)));case 14:O.next=20;break;case 16:return O.prev=16,O.t0=O.catch(4),O.next=20,(0,e.put)(Fr(kr({},Qr)));case 20:case"end":return O.stop()}}),jr,null,[[4,16]])}function Wr(t){var r,n,o;return regeneratorRuntime.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return c.prev=0,c.next=3,(0,e.select)(_e);case 3:return r=c.sent,n={need_fields:["phone_verified"]},r&&(n.shop_id=t),c.next=8,(0,e.call)(P.fetch,{subServer:"coreapi",parent:"user",resource:"get_info",method:"POST",payload:JSON.stringify(n)});case 8:return o=c.sent,c.next=11,(0,e.put)(Vr({hasVerifyPhoneNumber:o.is_phone_verified,shopId:t,isSubAccount:r}));case 11:return c.abrupt("return",o.is_phone_verified);case 14:c.prev=14,c.t0=c.catch(0);case 16:case"end":return c.stop()}}),Hr,null,[[0,14]])}var Br,Kr,Yr=(A(wr={},ot.CHECK_USER_PERMISSION_SUCCEEDED,$e()),A(wr,ot.UPDATE_DEL_PERMISSION,$e()),A(wr,ot.CHECK_USER_VERIFY_STATUS_SUCCEED,(function(e,t){var r=t.payload,n=r.hasVerifyPhoneNumber,o=r.shopId,c=r.isSubAccount;return kr(kr({},e),{},c?{hasVerifyPhoneNumberMap:kr(kr({},e.hasVerifyPhoneNumberMap),{},A({},o,n))}:{hasVerifyPhoneNumber:n})})),wr),zr=regeneratorRuntime.mark($r),Xr=regeneratorRuntime.mark(Zr),Jr=(0,j.createActions)(A({},ot.SHOW_USER_REQUESTED,(function(e){return{userId:e.userId,shopId:e.shopId,buyerShopId:e.buyerShopId}}))).showUserRequested;function $r(t){var r,n,o,c,u,a,s;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return r=t.payload,n=r.userId,o=r.shopId,c=r.buyerShopId,i.prev=1,i.next=4,(0,e.call)(P.fetch,{resource:"users",id:n,params:{shop_id:o,need_cache:1,cache_expires:1800}});case 4:u=i.sent,i.next=10;break;case 7:i.prev=7,i.t0=i.catch(1),u={id:n,shop_id:c};case 10:return a=(0,P.normalize)("users",u),s=a.entities,i.next=13,(0,e.put)(x({entities:s}));case 13:return i.next=15,(0,e.put)(Kt({userId:n,shopId:o}));case 15:case"end":return i.stop()}}),zr,null,[[1,7]])}function Zr(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,e.takeEvery)(Jr,$r);case 2:case"end":return t.stop()}}),Xr)}var en=regeneratorRuntime.mark(un),tn=regeneratorRuntime.mark(an),rn=(0,j.createActions)((A(Br={},ot.UPDATE_IS_MAIN_PAGE,(function(e){return{isMainPage:e.isMainPage}})),A(Br,ot.UPDATE_CUR_TAB_FOCUSED,(function(e){return{focused:e.focused}})),A(Br,ot.UPDATE_CUR_TAB_FOCUSED_SUCCEEDED,(function(e){return{curTabFocused:e.curTabFocused}})),Br)),nn=rn.updateIsMainPage,on=rn.updateCurTabFocused,cn=rn.updateCurTabFocusedSucceeded;function un(t){var r;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!(r=t.payload.focused)){n.next=6;break}return n.next=4,(0,e.call)(Ke.tabFocused);case 4:return n.next=6,(0,e.put)(nn({isMainPage:!0}));case 6:return n.next=8,(0,e.put)(cn({curTabFocused:r}));case 8:case"end":return n.stop()}}),en)}function an(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,e.takeEvery)(on,un);case 2:case"end":return t.stop()}}),tn)}var sn,fn,En,pn,ln=(A(Kr={},ot.UPDATE_IS_MAIN_PAGE,$e()),A(Kr,ot.UPDATE_CUR_TAB_FOCUSED_SUCCEEDED,$e()),Kr),Sn=(0,j.createActions)((A(sn={},ot.UPDATE_CAPTCHA_VISIBLE,(function(e){return{captchaVisible:e.captchaVisible,resendMessagePayload:e.resendMessagePayload}})),A(sn,ot.UPDATE_CAPTCHA_SIGNATURE,(function(e){var t=e.signature;return{signature:void 0===t?"":t}})),A(sn,ot.UPDATE_CAPTCHA_SIGNATURE_SUCCEEDED,(function(e){var t=e.captchaSignature;return{captchaSignature:void 0===t?"":t}})),sn)),dn=Sn.updateCaptchaVisible,_n=Sn.updateCaptchaSignature,Tn=Sn.updateCaptchaSignatureSucceeded,hn=(A(fn={},ot.UPDATE_CAPTCHA_VISIBLE,$e()),A(fn,ot.UPDATE_CAPTCHA_SIGNATURE_SUCCEEDED,$e()),fn);function On(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function gn(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?On(Object(r),!0).forEach((function(t){A(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):On(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Rn=(0,j.createActions)((A(En={},ot.SET_TEXT_BOX_HEIGHT,(function(e){return e})),A(En,ot.SET_CHAT_LIST_WIDTH,(function(e){return e})),En)),Dn=Rn.setTextBoxHeight,An=Rn.setChatListWidth,bn=(A(pn={},ot.SET_TEXT_BOX_HEIGHT,(function(e,t){var r=t.payload;return gn(gn({},e),{},{textBoxHeight:r})})),A(pn,ot.SET_CHAT_LIST_WIDTH,(function(e,t){var r=t.payload;return gn(gn({},e),{},{chatlistWidth:r})})),pn),Cn=(0,j.createActions)(A({},ot.BLOCK_USER_REQUESTED,(function(e){var t=e.buyerName,r=e.buyerId,n=e.block;return{buyerName:t,buyerId:r,block:void 0===n||n,shopId:e.shopId,conversationId:e.conversationId}}))).blockUserRequested,Un=regeneratorRuntime.mark((function t(){var r=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r.length>0&&void 0!==r[0]&&!r[0]){t.next=4;break}return t.next=4,(0,e.call)(Ke.closeConnect);case 4:return t.next=6,(0,e.put)(Dr());case 6:return t.next=8,(0,e.put)(Yc());case 8:(0,n.removeItem)("mini-session"),(0,n.removeItem)("mini-sc_redirect");case 10:case"end":return t.stop()}}),t)})),mn=regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,r={server:(0,n.getSCApiServer)(),namespace:"",resource:"logout/",params:{SPC_CDS:fr().get("SPC_CDS"),SPC_CDS_VER:2}},(0,n.isVisitingCNSC)()||(0,n.isVisitingKRSC)()?(r.version="cnsc",r.parent="selleraccount"):r.version="v1",t.next=5,(0,e.call)(P.fetch,r);case 5:return document.location.replace("https://".concat((0,n.getSellerCenterUrl)(),"/account/signin")),window.removeEventListener("online",(function(){ar.store.dispatch(Bt({networkStatus:"online"}))})),window.removeEventListener("offline",(function(){ar.store.dispatch(Bt({networkStatus:"offline"}))})),(0,P.clearApiCache)(),t.next=11,(0,e.call)(Un);case 11:t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),t.t0.handler?(0,e.call)(t.t0.handler):console.error("[Logout Failed] ",t.t0);case 16:case"end":return t.stop()}}),t,null,[[0,13]])})),Pn=(0,j.createActions)(A({},ot.REPORT_USER_REQUESTED,(function(e){return{userId:e.userId,shopId:e.shopId}}))).reportUserRequested;function vn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function yn(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?vn(Object(r),!0).forEach((function(t){A(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):vn(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var In,wn,Nn=[Dt,Ht,nr,yr,Zr,an],jn={newbie:[],networkStatus:"online",hasVideoPermission:!1,currentUserId:null,currentUser:{},hasReplyPermission:!1,hasDeletePermission:!1,deleteConfigVersion:0,deleteConfigDuration:0,captchaVisible:!1,captchaSignature:"",resendMessagePayload:void 0,curTabFocused:!0,isMainPage:!0,shopStatisticsMap:{},subaccountHasUnrepliedPermission:!1,textBoxHeight:n.MINI_MIN_TEXT_BOX_HEIGHT,showAutoHangupModal:!1,waitingTimeFilter:!1,hasVerifyPhoneNumber:!1,hasVerifyPhoneNumberMap:{},showCrrDue:!1,loginSuccess:!0,showChatWindow:!1,showConversationDetail:!0,showEntry:!1,hasFetchedUnread:!1},Hn=(0,j.handleActions)(yn(yn(yn(yn(yn(yn(yn(yn({},Yr),hn),ln),bn),bt),Lt),ur),Nr),jn),xn=function(e){return(0,t.createSelector)(T,(function(t){return(0,z.denormalize)(e,P.shopSchema,{shops:t})}))},kn=function(e){var t;return(null==e||null===(t=e.shopReducer)||void 0===t?void 0:t.fetchedShopIds)||[]};!function(e){e.FETCH_SHOPS_REQUESTED="FETCH_SHOPS_REQUESTED",e.FETCH_SHOPS_SUCCEED="FETCH_SHOPS_SUCCEED",e.UPDATE_FETCH_SHOPS_STATUS="UPDATE_FETCH_SHOPS_STATUS",e.FETCH_SHOP_AUTH_REQUESTED="FETCH_SHOP_AUTH_REQUESTED",e.UPDATE_FETCHED_SHOP_IDS="UPDATE_FETCHED_SHOP_IDS",e.UPDATE_SHOP_FILTER="UPDATE_SHOP_FILTER",e.VISIT_SHOP_SELLER_CENTER_REQUESTED="VISIT_SHOP_SELLER_CENTER_REQUESTED",e.VISIT_MALL_REQUESTED="VISIT_MALL_REQUESTED",e.SEARCH_SHOPS_REQUESTED="SEARCH_SHOPS_REQUESTED",e.SEARCH_SHOPS_SUCCEED="SEARCH_SHOPS_SUCCEED",e.UPDATE_SEARCH_SHOPS_STATUS="UPDATE_SEARCH_SHOPS_STATUS",e.FETCH_SHOP_DETAIL_INFO="FETCH_SHOP_DETAIL_INFO",e.UPDATE_CURRENT_FETCH_SHOP_IDS="UPDATE_CURRENT_FETCH_SHOP_IDS",e.RESET_CURRENT_FETCH_SHOPS="RESET_CURRENT_FETCH_SHOPS"}(In||(In={}));var Ln=(0,j.createActions)((A(wn={},In.FETCH_SHOPS_REQUESTED,(function(e){return{region:e.region}})),A(wn,In.FETCH_SHOPS_SUCCEED,(function(e){return{pagination:e.pagination,result:e.result}})),A(wn,In.UPDATE_FETCH_SHOPS_STATUS,(function(e){return{status:e.status}})),A(wn,In.FETCH_SHOP_AUTH_REQUESTED,(function(e){return{shopId:e.shopId}})),A(wn,In.UPDATE_FETCHED_SHOP_IDS,(function(e){return{shopIds:e.shopIds}})),A(wn,In.UPDATE_SHOP_FILTER,(function(e){return{shopFilter:e.shopFilter}})),A(wn,In.VISIT_SHOP_SELLER_CENTER_REQUESTED,(function(e){return{url:e.url,shopId:e.shopId,orderId:e.orderId,itemId:e.itemId,returnId:e.returnId}})),A(wn,In.SEARCH_SHOPS_REQUESTED,(function(e){return{keyword:e.keyword,region:e.region}})),A(wn,In.SEARCH_SHOPS_SUCCEED,(function(e){return{pagination:e.pagination,result:e.result,keyword:e.keyword}})),A(wn,In.UPDATE_SEARCH_SHOPS_STATUS,(function(e){return{searchStatus:e.searchStatus}})),A(wn,In.FETCH_SHOP_DETAIL_INFO,(function(e){return{shopId:e.shopId}})),wn)),Fn=Ln.fetchShopsRequested,Gn=(Ln.fetchShopsSucceed,Ln.updateFetchShopsStatus,Ln.fetchShopAuthRequested),Mn=Ln.updateFetchedShopIds,Vn=Ln.updateShopFilter,Qn=Ln.visitShopSellerCenterRequested,qn=Ln.searchShopsRequested,Wn=(Ln.searchShopsSucceed,Ln.updateSearchShopsStatus,Ln.fetchShopDetailInfo),Bn=regeneratorRuntime.mark(Yn),Kn=regeneratorRuntime.mark(zn);function Yn(t){var r,n,o,c;return regeneratorRuntime.wrap((function(u){for(;;)switch(u.prev=u.next){case 0:return r=t.payload.shopId,u.prev=1,u.next=4,(0,e.select)(xn(r));case 4:return n=u.sent,u.next=7,(0,e.call)(P.fetch,{resource:"shop",id:r,params:{need_cache:1,cache_expires:600}});case 7:return n=u.sent,o=(0,P.normalize)("shops",n),c=o.entities,u.next=11,(0,e.put)(x({entities:c}));case 11:return u.next=13,(0,e.put)(Mn({shopIds:[n.id]}));case 13:return u.abrupt("return",n);case 16:return u.prev=16,u.t0=u.catch(1),u.abrupt("return",{});case 19:case"end":return u.stop()}}),Bn,null,[[1,16]])}function zn(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,e.takeEvery)(Wn,Yn);case 2:case"end":return t.stop()}}),Kn)}var Xn,Jn=A({},In.UPDATE_SHOP_FILTER,$e()),$n=regeneratorRuntime.mark(eo),Zn=regeneratorRuntime.mark(to);function eo(t){var r,o,c,u,a,s,i,f,E,p,l,S,d,_,T,h,O,g,R,D,A,b,C,U,m,v,y;return regeneratorRuntime.wrap((function(I){for(;;)switch(I.prev=I.next){case 0:return r=t.payload,o=r.url,c=r.shopId,u=r.orderId,a=r.itemId,s=r.returnId,I.prev=1,I.next=4,(0,e.call)(P.fetch,{resource:"shop",id:c,suffix:"sc"});case 4:if(i=I.sent,f=i.sc_url,E=i.upgraded,p=i.region,!E){I.next=12;break}return l=window.open(),o?((S=o.split("/"))[2]=(0,n.getSellerCenterUrl)(p),d=S.join("/"),l.location=d.includes("?")?"".concat(d,"&cnsc_shop_id=").concat(c):"".concat(d,"?cnsc_shop_id=").concat(c)):l.location=u?"https://".concat((0,n.getSellerCenterUrl)(p),"/portal/sale/").concat(u,"?cnsc_shop_id=").concat(c):a?"https://".concat((0,n.getSellerCenterUrl)(p),"/portal/product/").concat(a,"?cnsc_shop_id=").concat(c):s?"https://".concat((0,n.getSellerCenterUrl)(p),"/portal/sale/return/").concat(s,"?cnsc_shop_id=").concat(c):"https://".concat((0,n.getSellerCenterUrl)(p),"?cnsc_shop_id=").concat(c),I.abrupt("return");case 12:if(!f){I.next=25;break}if(_=f.split("?"),T=_[1].split("&").find((function(e){return e.startsWith("sig=")})),h=T.substring(4),O=_[0].split("."),g=O[O.length-1],R=window.open(),!o){I.next=22;break}return R.location=o.includes("?")?"".concat(o,"&sig=").concat(h):"".concat(o,"?sig=").concat(h),I.abrupt("return");case 22:u||a||s?u?(D="https://".concat((0,n.getSellerCenterUrl)(g),"/portal/sale/").concat(u,"?sig=").concat(h),R.location=D):a?(A="https://".concat((0,n.getSellerCenterUrl)(g),"/portal/product/").concat(a,"?sig=").concat(h),R.location=A):s&&(b="https://".concat((0,n.getSellerCenterUrl)(g),"/portal/sale/return/").concat(s,"?sig=").concat(h),R.location=b):(C="https://".concat((0,n.getSellerCenterUrl)(g),"?sig=").concat(h),R.location=C),I.next=28;break;case 25:return U=Do(!1,{type:"permission-denied"}),I.next=28,(0,e.put)(Co({toast:U}));case 28:I.next=38;break;case 30:return I.prev=30,I.t0=I.catch(1),I.next=34,(0,e.select)(xn(c));case 34:m=I.sent,v="https://".concat((0,n.getSellerCenterUrl)(m.country),"/portal/"),y=u?"sale/".concat(u):a?"product/".concat(a):s?"sale/return/".concat(s):"",window.open(v+y);case 38:case"end":return I.stop()}}),$n,null,[[1,30]])}function to(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,e.takeEvery)(Qn,eo);case 2:case"end":return t.stop()}}),Zn)}function ro(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function no(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ro(Object(r),!0).forEach((function(t){A(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ro(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var oo=regeneratorRuntime.mark(so),co=regeneratorRuntime.mark(io),uo=function(e){return new Promise((function(t){(0,P.fetch)({parent:"conversation",resource:"unread-counts",params:{shop_ids:JSON.stringify(e)}}).then((function(e){var r=e["unread-counts"];t(void 0===r?[]:r)})).catch((function(){t([])}))}))},ao=function(e){var t=e.shopIds,r={ids:JSON.stringify(t)};return new Promise((function(e){(0,P.fetch)({resource:"shop_list",params:r}).then((function(t){var r=t.shops;e(void 0===r?[]:r)})).catch((function(){e([])}))}))};function so(t){var r,n;return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return r=t.payload.shopId,o.prev=1,o.next=4,(0,e.call)(P.fetch,{parent:"shop",parentId:r,resource:"auth"});case 4:return n=o.sent,o.abrupt("return",n);case 8:return o.prev=8,o.t0=o.catch(1),o.abrupt("return",{});case 11:case"end":return o.stop()}}),oo,null,[[1,8]])}function io(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,e.takeEvery)(Gn,so);case 2:case"end":return t.stop()}}),co)}var fo=(A(Xn={},In.FETCH_SHOPS_SUCCEED,Ze("fetchResult")),A(Xn,In.SEARCH_SHOPS_SUCCEED,Ze("searchResult")),A(Xn,In.UPDATE_FETCH_SHOPS_STATUS,$e()),A(Xn,In.UPDATE_SEARCH_SHOPS_STATUS,$e()),A(Xn,In.UPDATE_FETCHED_SHOP_IDS,(function(e,t){var r=t.payload.shopIds,n=e.fetchedShopIds;return no(no({},e),{},{fetchedShopIds:Ct(new Set(n.concat(r)))})})),Xn);function Eo(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function po(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Eo(Object(r),!0).forEach((function(t){A(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Eo(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var lo,So,_o={currentPage:0,perPage:20,hasMore:!0},To=[zn,io,to],ho={shopFilter:null,fetchedShopIds:[],fetchResult:{pagination:po({},_o),result:[]},status:"",searchResult:{pagination:po({},_o),result:[],keyword:""},searchStatus:""},Oo=(0,j.handleActions)(po(po({},Jn),fo),ho),go=function(e){return e.toastReducer.toast},Ro=r(701).t,Do=function(e,t){var r={};if(t){switch(t.type){case"auto-reply":e?t.first&&"enabled"===t.action?(r.message=Ro("settings.enable_auto_reply_successfully"),r.show=!0):(r.message="",r.show=!1):(t.first&&"enabled"===t.action?r.message=Ro("settings.failed_to_enable_auto_reply"):r.message="enabled"===t.action?Ro("settings.failed_to_enable"):Ro("settings.failed_to_disable"),r.show=!0);break;case"message":r.message=e?"save"===t.action?Ro("settings.message.save_successfully"):"delete"===t.action?Ro("settings.message.delete_successfully"):Ro("settings.message.import_successfully"):"save"===t.action?Ro("settings.message.failed_to_save"):"delete"===t.action?Ro("settings.message.failed_to_delete"):Ro("settings.message.failed_to_import"),r.show=!0;break;case"message-tips":e?(r.message="",r.show=!1):(r.message="enabled"===t.action?Ro("settings.failed_to_enable"):Ro("settings.failed_to_disable"),r.show=!0);break;case"forward":e||(r.message=403===t.status?Ro("forward.exception",{forwardName:""}):Ro("forward.server_error"),r.show=!0);break;case"send-feedback":r.message=Ro("feedback_modal.error.failed_to_send"),r.show=!0;break;case"server-error-tips":r.message=Ro("common.server_error.warning_tips"),r.show=!0;break;case"conversation-closed-tip":r.message=Ro("conversation_detail.closed.warning_tips"),r.show=!0;break;case"permission-denied":r.message=Ro("common.permission_denied"),r.show=!0;break;case"claim-voucher":r.message=Ro(e?"voucher.claim.success":"voucher.claim.fail"),r.show=!0;break;case"claim-voucher-not-satisfy":r.message=Ro("voucher.claim.fail_not_satisfy_rule"),r.show=!0;break;case"claim-voucher-already-claimed":r.message=Ro("voucher.claim.fail_already_claimed"),r.show=!0;break;case"private-image":r.message=Ro("common.image.expired"),r.show=!0;break;case"operation":"save"===t.action&&(r.message=Ro(e?"text.save_successfully":"text.save_failed")),r.show=!0;break;default:r.message=t.message,r.show=!0}r.type=e?"success":"fail"}return r};!function(e){e.COPY_SUCCEED_FEEDBACK="COPY_SUCCEED_FEEDBACK",e.SET_TOAST_INFORMATION="SET_TOAST_INFORMATION",e.SET_TOAST_INFORMATION_SUCCEEDED="SET_TOAST_INFORMATION_SUCCEEDED"}(lo||(lo={}));var Ao=(0,j.createActions)((A(So={},lo.COPY_SUCCEED_FEEDBACK,(function(){return{}})),A(So,lo.SET_TOAST_INFORMATION,(function(e){return{type:e.type,error:e.error,toast:e.toast}})),A(So,lo.SET_TOAST_INFORMATION_SUCCEEDED,(function(e){return{toast:e.toast}})),So)),bo=Ao.copySucceedFeedback,Co=Ao.setToastInformation,Uo=Ao.setToastInformationSucceeded,mo=regeneratorRuntime.mark(vo),Po=regeneratorRuntime.mark(yo);function vo(t){var r,n,o,c,u;return regeneratorRuntime.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return r=t.payload,n=r.type,o=r.error,c=r.toast,a.next=3,(0,e.select)(me);case 3:if(!a.sent){a.next=11;break}return u=null,n&&(u=Do(!1,{type:n})),void 0!==o&&(u=o instanceof P.CustomError||o instanceof P.Webview?o.handler():Do(!1,{type:"server-error-tips"})),c&&(u=c),a.next=11,(0,e.put)(Uo({toast:u}));case 11:case"end":return a.stop()}}),mo)}function yo(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,e.takeEvery)(Co,vo);case 2:case"end":return t.stop()}}),Po)}var Io=A({},lo.SET_TOAST_INFORMATION_SUCCEEDED,$e()),wo=r(701).t,No=regeneratorRuntime.mark(Ho),jo=regeneratorRuntime.mark(xo);function Ho(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,e.put)(Co({toast:Do(!0,{message:wo("common.successful_copied")})}));case 2:case"end":return t.stop()}}),No)}function xo(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,e.takeEvery)(bo,Ho);case 2:case"end":return t.stop()}}),jo)}function ko(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var Lo,Fo,Go=[yo,xo],Mo=(0,j.handleActions)(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ko(Object(r),!0).forEach((function(t){A(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ko(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},Io),{toast:{type:"",message:"",show:!1}}),Vo=function(e){return e.messageShortcutGroupReducer||{groups:[],status:"",currentGroupType:-1,currentGroupId:-1}},Qo=(0,t.createSelector)(Vo,(function(e){return e.status})),qo=(0,t.createSelector)(Vo,(function(e){return e.currentGroupType})),Wo=(0,t.createSelector)(Vo,(function(e){return e.currentGroupId})),Bo=(0,t.createSelector)(Vo,(function(e){return e.groups})),Ko=(0,t.createSelector)(Bo,(function(e){return e.filter((function(e){return e.group_type===n.MessageShortcutGroupType.PERSONAL}))})),Yo=(0,t.createSelector)(Bo,(function(e){return e.filter((function(e){return e.group_type===n.MessageShortcutGroupType.TEAM}))})),zo=(0,t.createSelector)(Bo,qo,(function(e,t){return-1===t?e:e.filter((function(e){return e.group_type===t}))})),Xo=(0,t.createSelector)(Ko,(function(e){return e.reduce((function(e,t){var r=t.message_shortcuts,n=void 0===r?[]:r;return e.concat(n)}),[])})),Jo=(0,t.createSelector)(Yo,(function(e){return e.reduce((function(e,t){var r=t.message_shortcuts,n=void 0===r?[]:r;return e.concat(n)}),[])})),$o=(0,t.createSelector)(Xo,Jo,(function(){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return[].concat(Ct(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]),Ct(e))})),Zo=(0,t.createSelector)($o,(function(e){var t=e.filter((function(e){return!(null==e||!e.pin_time)})).sort((function(e,t){return e.pin_time-t.pin_time})),r=e.filter((function(e){return!(null!=e&&e.pin_time)}));return[].concat(Ct(t),Ct(r))})),ec=(0,t.createSelector)(Zo,qo,Wo,(function(e,t,r){var n=-1===t?e:e.filter((function(e){return e.group_type===t}));return-1===r?n:n.filter((function(e){return e.groupId===r}))})),tc=function(e){return e.settingsReducer.settings},rc=function(e){return e.settingsReducer.needForceUpdate},nc=function(e){return e.settingsReducer.status},oc=function(e){return e.settingsReducer.fetchStatus},cc=(0,t.createSelector)(tc,(function(e){return e.auto_translation_status||""})),uc=(0,t.createSelector)(tc,(function(e){return e.message_shortcuts_status||""})),ac=(0,t.createSelector)(tc,(function(e){return e.legacy_message_shortcuts_count||0})),sc=(0,t.createSelector)(tc,(function(e){return e.distribution_account_status||"enabled"})),ic=(0,t.createSelector)(tc,(function(e){return e.display_banner||!1}));!function(e){e.FETCH_SETTINGS_REQUESTED="FETCH_SETTINGS_REQUESTED",e.FETCH_SETTINGS_SUCCEEDED="FETCH_SETTINGS_SUCCEEDED",e.FETCH_SETTINGS_STATUS="FETCH_SETTINGS_STATUS",e.UPDATE_SETTING_STATUS="UPDATE_SETTING_STATUS",e.UPDATE_SETTINGS_REQUESTED_BY_TYPE="UPDATE_SETTINGS_REQUESTED_BY_TYPE",e.UPDATE_SETTINGS_REQUESTED="UPDATE_SETTINGS_REQUESTED",e.UPDATE_SETTINGS_SUCCEEDED="UPDATE_SETTINGS_SUCCEEDED"}(Lo||(Lo={}));var fc,Ec=(0,j.createActions)((A(Fo={},Lo.FETCH_SETTINGS_SUCCEEDED,(function(e){return{settings:e.settings,fetchStatus:e.fetchStatus,timestamp:e.timestamp,needForceUpdate:e.needForceUpdate}})),A(Fo,Lo.FETCH_SETTINGS_STATUS,(function(e){return{fetchStatus:e.fetchStatus}})),A(Fo,Lo.UPDATE_SETTING_STATUS,(function(e){return{status:e.status}})),A(Fo,Lo.UPDATE_SETTINGS_REQUESTED_BY_TYPE,(function(e){return e})),A(Fo,Lo.UPDATE_SETTINGS_REQUESTED,(function(e){return{params:e.params}})),A(Fo,Lo.UPDATE_SETTINGS_SUCCEEDED,(function(e){return{settings:e.settings,needForceUpdate:e.needForceUpdate}})),Fo)),pc=Ec.fetchSettingsSucceeded,lc=Ec.fetchSettingsStatus,Sc=Ec.updateSettingStatus,dc=Ec.updateSettingsRequestedByType,_c=Ec.updateSettingsRequested,Tc=Ec.updateSettingsSucceeded,hc=regeneratorRuntime.mark(Oc);function Oc(){var t;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,(0,e.put)(lc({fetchStatus:n.DataFetchStatus.PENDING}));case 3:return r.next=5,(0,e.call)(P.fetch,{parent:"user",resource:"setting"});case 5:return t=r.sent,r.next=8,(0,e.put)(pc({settings:t,fetchStatus:n.DataFetchStatus.SUCCEED,timestamp:Date.now(),needForceUpdate:!1}));case 8:return r.abrupt("return",t);case 11:return r.prev=11,r.t0=r.catch(0),r.next=15,(0,e.put)(lc({fetchStatus:n.DataFetchStatus.FAILED}));case 15:return r.abrupt("return",{});case 16:case"end":return r.stop()}}),hc,null,[[0,11]])}var gc=(A(fc={},Lo.FETCH_SETTINGS_SUCCEEDED,$e()),A(fc,Lo.FETCH_SETTINGS_STATUS,$e()),fc);function Rc(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},c=Object.keys(e);for(n=0;n<c.length;n++)r=c[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(n=0;n<c.length;n++)r=c[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var Dc=["extra","linked"],Ac=regeneratorRuntime.mark(mc),bc=regeneratorRuntime.mark(Pc);function Cc(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Uc(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Cc(Object(r),!0).forEach((function(t){A(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Cc(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function mc(t){var r,o,c,u,a,s,i,f,E,p;return regeneratorRuntime.wrap((function(l){for(;;)switch(l.prev=l.next){case 0:return r=t.payload.params,o=r.extra,c=r.linked,u=Rc(r,Dc),l.prev=2,l.next=5,(0,e.put)(mu({event_time:(0,n.getCurrentTimestampString)(),url:window.location.href}));case 5:return l.next=7,(0,e.put)(Sc({status:n.OperationStatus.PENDING}));case 7:return l.next=9,(0,e.call)(P.fetch,{method:"PUT",parent:"user",resource:"setting",payload:JSON.stringify(Uc({},u))});case 9:return a=l.sent,l.next=12,(0,e.put)(Tc({settings:a,needForceUpdate:!0}));case 12:return s=Do(!0,o),l.next=15,(0,e.put)(Co({toast:s}));case 15:return l.next=17,(0,e.put)(Sc({status:n.OperationStatus.SUCCEED}));case 17:if(c){l.next=20;break}return l.next=20,(0,e.call)(Ke.shareSettingData,Uc(Uc({type:n.ShareDataType.UPDATE_SETTING},r),{},{linked:!0,settings:a,needForceUpdate:!0}));case 20:case 32:l.next=38;break;case 22:return l.prev=22,l.t0=l.catch(2),i=l.t0 instanceof P.Blacklist,f=l.t0 instanceof P.InternalServerError,E=i?n.OperationStatus.BLACKLIST_ERROR:f?n.OperationStatus.INTERNAL_SERVER_ERROR:n.OperationStatus.FAILED,l.next=29,(0,e.put)(Sc({status:E}));case 29:if(!f){l.next=34;break}return l.next=32,(0,e.put)(Co({error:l.t0}));case 34:if(i){l.next=38;break}return p=Do(!1,o),l.next=38,(0,e.put)(Co({toast:p}));case 38:case"end":return l.stop()}}),Ac,null,[[2,22]])}function Pc(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,e.takeLatest)([_c],mc);case 2:case"end":return t.stop()}}),bc)}var vc=A({},Lo.UPDATE_SETTINGS_SUCCEEDED,$e()),yc=A({},Lo.UPDATE_SETTING_STATUS,$e());function Ic(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function wc(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ic(Object(r),!0).forEach((function(t){A(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ic(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Nc,jc=[Pc],Hc=(0,j.handleActions)(wc(wc(wc({},gc),vc),yc),{settings:{},fetchStatus:"",status:""});!function(e){e.HANDLE_401_ERROR_REQUESTED="HANDLE_401_ERROR_REQUESTED",e.UPDATE_CONVERSATION_LISTS_HASH="UPDATE_CONVERSATION_LISTS_HASH",e.OPEN_MALL_URL="OPEN_MALL_URL"}(Nc||(Nc={}));var xc=regeneratorRuntime.mark(Gc),kc=regeneratorRuntime.mark(Mc),Lc=(0,j.createActions)(A({},Nc.OPEN_MALL_URL,(function(e){return{path:e.path,region:e.region}}))).openMallUrl,Fc="xiapibuy.com";function Gc(t){var r,o,c,u,a,s,i,f,E,p,l,S;return regeneratorRuntime.wrap((function(d){for(;;)switch(d.prev=d.next){case 0:if(r=t.payload,o=r.path,c=void 0===o?"":o,u=r.region,"cn"!==(s=(a=void 0===u?"":u)?a.toLowerCase():(0,n.getRuntimeRegion)())&&"kr"!==s||(s="my"),f=c?c.startsWith("/")?c:"/".concat(c):"",!(0,n.isVisitingCn)()){d.next=21;break}return d.prev=5,d.next=8,(0,e.call)(P.fetch,{url:"https://".concat((0,n.getSCApiServer)(),"/selleraccount/nonce/get/")});case 8:E=d.sent,p=E.data,l="".concat((0,n.cnDomainHash)(s),".").concat((0,n.envPrefix)()).concat(Fc),S=encodeURIComponent(window.btoa('{"next":"https://'.concat(l).concat(f,'"}'))),f="/api/seller_platform/nonce/callback/?nonce=".concat(p.nonce,"&region=").concat(s,"&state=").concat(S),i="https://".concat(l).concat(f),d.next=19;break;case 16:d.prev=16,d.t0=d.catch(5),i="https://".concat((0,n.cnDomainHash)(s),".").concat((0,n.envPrefix)()).concat(Fc).concat(f);case 19:d.next=22;break;case 21:i="https://".concat((0,n.domainPrefix)(),".").concat((0,n.domainSuffix)(s)).concat(f);case 22:window.open(i);case 23:case"end":return d.stop()}}),xc,null,[[5,16]])}function Mc(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,e.takeEvery)(Lc,Gc);case 2:case"end":return t.stop()}}),kc)}var Vc=(0,j.createActions)(A({},Nc.HANDLE_401_ERROR_REQUESTED,(function(e){return{resource:e.resource}}))).handle401ErrorRequested,Qc=(0,j.createActions)(A({},Nc.UPDATE_CONVERSATION_LISTS_HASH,(function(){return{}}))).updateConversationListsHash,qc=[Mc],Wc=(0,t.createSelector)(c,(function(e){return e.offers||{}})),Bc=function(e,r,o,c){return(0,t.createSelector)(Wc,(function(t){return Object.values(t).filter((function(t){return t.product_id===c&&t.model_id===r&&t.conversation_id===e&&t.id!==o&&t.status===n.OfferStatus.PENDING}))}))},Kc=function(e){return(0,t.createSelector)(c,(function(t){return(0,z.denormalize)(e,P.offerSchema,t)}))},Yc=(0,j.createActions)({REDUX_RESET:function(){return{}}}).reduxReset;window.addExternalGlobal("resetAction",Yc);var zc,Xc,Jc,$c=function(e){var t;return(null===(t=e.draftReducer)||void 0===t?void 0:t.draftHash)||{}},Zc=function(e){return(0,t.createSelector)($c,(function(t){return t[e]||""}))},eu=function(e){return e.translatePreferenceReducer.translationSettings},tu=function(e){return e.translatePreferenceReducer.fetchSettingsStatus},ru=function(e){return e.translatePreferenceReducer.updateStatus};function nu(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ou(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?nu(Object(r),!0).forEach((function(t){A(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):nu(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}!function(e){e.FETCH_SHOP_TRANSLATION_SETTINGS="FETCH_SHOP_TRANSLATION_SETTINGS",e.UPDATE_SHOP_TRANSLATION_SETTINGS="UPDATE_SHOP_TRANSLATION_SETTINGS",e.UPDATE_FETCH_STATUS="UPDATE_FETCH_STATUS",e.UPDATE_SETTING_PREFERENCE_STATUS="UPDATE_SETTING_PREFERENCE_STATUS",e.UPDATE_SHOP_TRANSLATION_SETTINGS_RECORD="UPDATE_SHOP_TRANSLATION_SETTINGS_RECORD"}(zc||(zc={}));var cu=regeneratorRuntime.mark(lu),uu=regeneratorRuntime.mark(Su),au=(0,j.createActions)((A(Xc={},zc.FETCH_SHOP_TRANSLATION_SETTINGS,(function(e){return{shopId:e.shopId}})),A(Xc,zc.UPDATE_SHOP_TRANSLATION_SETTINGS,(function(e){return{settings:e.settings}})),A(Xc,zc.UPDATE_FETCH_STATUS,(function(e){return{fetchSettingsStatus:e.fetchSettingsStatus}})),A(Xc,zc.UPDATE_SETTING_PREFERENCE_STATUS,(function(e){return{updateStatus:e.updateStatus}})),A(Xc,zc.UPDATE_SHOP_TRANSLATION_SETTINGS_RECORD,(function(e){return{shopId:e.shopId,source:e.source,translationPreference:e.translationPreference,autoTranslationStatus:e.autoTranslationStatus,inTranslationFeedbackWhitelist:e.inTranslationFeedbackWhitelist}})),Xc)),su=au.fetchShopTranslationSettings,iu=au.updateShopTranslationSettings,fu=au.updateFetchStatus,Eu=au.updateSettingPreferenceStatus,pu=au.updateShopTranslationSettingsRecord;function lu(t){var r,n,o,c,u,a;return regeneratorRuntime.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return r=t.payload.shopId,s.prev=1,s.next=4,(0,e.put)(fu({fetchSettingsStatus:"loading"}));case 4:return s.next=6,(0,e.call)(P.fetch,{subServer:"workbenchapi",parent:"shop",resource:"setting",params:{shop_id:r}});case 6:return n=s.sent,o=n.source,c=n.translation_preference,u=n.auto_translation_status,a=n.in_translation_feedback_whitelist,s.next=13,(0,e.put)(fu({fetchSettingsStatus:"succeed"}));case 13:return s.next=15,(0,e.put)(pu({shopId:r,source:o,translationPreference:c,autoTranslationStatus:u,inTranslationFeedbackWhitelist:a}));case 15:s.next=21;break;case 17:return s.prev=17,s.t0=s.catch(1),s.next=21,(0,e.put)(fu({fetchSettingsStatus:"failed"}));case 21:case"end":return s.stop()}}),cu,null,[[1,17]])}function Su(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,e.takeEvery)(su,lu);case 2:case"end":return t.stop()}}),uu)}var du=(0,j.handleActions)((A(Jc={},zc.UPDATE_SHOP_TRANSLATION_SETTINGS_RECORD,(function(e,t){var r=t.payload,n=r.shopId,o=r.source,c=r.translationPreference,u=r.autoTranslationStatus,a=r.inTranslationFeedbackWhitelist,s=ou({},e.translationSettings),i=s[n]||{};return s[n]=ou(ou({},i),{},{translationPreference:c,autoTranslationStatus:u}),o&&(s[n].source=o),a&&(s[n].inTranslationFeedbackWhitelist=a),ou(ou({},e),{},{translationSettings:s})})),A(Jc,zc.UPDATE_FETCH_STATUS,$e()),A(Jc,zc.UPDATE_SETTING_PREFERENCE_STATUS,$e()),Jc),{translationSettings:{},fetchSettingsStatus:"",updateStatus:""}),_u=[Su],Tu=regeneratorRuntime.mark(gu);function hu(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ou(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?hu(Object(r),!0).forEach((function(t){A(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):hu(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function gu(t,r,n){var o,c,u,a,s=arguments;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return o=s.length>3&&void 0!==s[3]?s[3]:[],c=t,u=[],a=[],Array.isArray(t)&&(c=((0,P.normalize)(n,t).entities||{})[n]||{}),r.forEach((function(t){var r=t.id,s=c[r];s?["conversations","agentConversations"].includes(n)&&(void 0!==s.faking||s.latestMessageStatus||void 0!==s.unreplied)?(delete(t=Ou(Ou({},s),t)).faking,delete t.latestMessageStatus,delete t.unreplied,a.push(t)):(o.length&&o.forEach((function(e){t[e]=s[e]})),u.push((0,e.put)(k({name:n,id:r,record:Ou({},t)})))):a.push(t)})),a.length&&u.push((0,e.put)(x({entities:(0,P.normalize)(n,a).entities}))),i.next=9,(0,e.all)(u);case 9:case"end":return i.stop()}}),Tu)}var Ru,Du,Au=function(e){return(0,t.createSelector)(p,(function(t){return(0,z.denormalize)(e,[P.productSchema],{products:t})}))},bu=function(e){return e.reportReducer.beingReported};!function(e){e.REPORT_REQUESTED="REPORT_REQUESTED",e.CLEAR_REPORT_REQUESTED="CLEAR_REPORT_REQUESTED"}(Ru||(Ru={}));var Cu,Uu=(0,j.createActions)((A(Du={},Ru.REPORT_REQUESTED,(function(e){return{event_time:e.event_time,url:e.url}})),A(Du,Ru.CLEAR_REPORT_REQUESTED,(function(){return{}})),Du)),mu=Uu.reportRequested,Pu=Uu.clearReportRequested,vu=regeneratorRuntime.mark(Nu),yu=regeneratorRuntime.mark(ju);function Iu(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function wu(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Iu(Object(r),!0).forEach((function(t){A(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Iu(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Nu(){var t,r;return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,(0,e.select)(bu);case 2:if(!(t=o.sent).length){o.next=10;break}return r=Ct(t),o.next=7,(0,e.put)(Pu());case 7:return r.sort((function(e,t){return Number(t.event_time)-Number(e.event_time)})),o.next=10,(0,e.call)(P.fetch,{method:"POST",subServer:"coreapi",parent:"user",resource:"report_active",payload:JSON.stringify(wu(wu({},r[0]),{},{platform_id:(0,n.isVisitingCNSC)()||(0,n.isVisitingKRSC)()?2:1}))});case 10:case"end":return o.stop()}}),vu)}function ju(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,(0,e.delay)(6e4);case 3:return t.next=5,Nu();case 5:t.next=0;break;case 7:case"end":return t.stop()}}),yu)}var Hu=(A(Cu={},Ru.REPORT_REQUESTED,(function(e,t){var r=t.payload,n=r.event_time,o=r.url;return{beingReported:[].concat(Ct(e.beingReported),[{event_time:n,url:o}])}})),A(Cu,Ru.CLEAR_REPORT_REQUESTED,(function(e){return{beingReported:[]}})),Cu);function xu(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var ku,Lu,Fu=[ju],Gu=(0,j.handleActions)(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?xu(Object(r),!0).forEach((function(t){A(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):xu(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},Hu),{beingReported:[]});function Mu(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Vu(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Mu(Object(r),!0).forEach((function(t){A(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Mu(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}!function(e){e.ADD_NEED_CAPTCHA_REQUEST="ADD_NEED_CAPTCHA_REQUEST",e.DELETE_CAPTCHA_REQUEST="DELETE_CAPTCHA_REQUEST",e.CLEAR_NEED_CAPTCHA_REQUEST="CLEAR_NEED_CAPTCHA_REQUEST",e.RESEND_NEED_CAPTCHA_REQUEST="RESEND_NEED_CAPTCHA_REQUEST"}(ku||(ku={}));var Qu,qu=(A(Lu={},ku.ADD_NEED_CAPTCHA_REQUEST,(function(e,t){var r=t.payload.request,n=Ct(e.verifyRequests);return n.push(r),Vu(Vu({},e),{},{verifyRequests:n})})),A(Lu,ku.DELETE_CAPTCHA_REQUEST,(function(e){var t=Ct(e.verifyRequests);return t.pop(),Vu(Vu({},e),{},{verifyRequests:t})})),A(Lu,ku.CLEAR_NEED_CAPTCHA_REQUEST,(function(e){return Vu(Vu({},e),{},{verifyRequests:[]})})),Lu),Wu=(0,j.createActions)((A(Qu={},ku.ADD_NEED_CAPTCHA_REQUEST,(function(e){return{request:e.request}})),A(Qu,ku.DELETE_CAPTCHA_REQUEST,(function(){return{}})),A(Qu,ku.CLEAR_NEED_CAPTCHA_REQUEST,(function(){return{}})),A(Qu,ku.RESEND_NEED_CAPTCHA_REQUEST,(function(){return{}})),Qu)),Bu=Wu.addNeedCaptchaRequest,Ku=Wu.deleteCaptchaRequest,Yu=Wu.clearNeedCaptchaRequest,zu=Wu.resendNeedCaptchaRequest,Xu=regeneratorRuntime.mark(ea),Ju=regeneratorRuntime.mark(ta);function $u(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return Zu(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Zu(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var c,u=!0,a=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return u=e.done,e},e:function(e){a=!0,c=e},f:function(){try{u||null==r.return||r.return()}finally{if(a)throw c}}}}function Zu(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function ea(){var t,r,n,o,c,u;return regeneratorRuntime.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,(0,e.select)(ca);case 3:if(!(t=a.sent).length){a.next=35;break}return a.next=7,(0,e.put)(Yu());case 7:r=$u(t),a.prev=8,r.s();case 10:if((n=r.n()).done){a.next=27;break}o=n.value,c=o.id,u=o.extra,a.t0=c,a.next="unread-count"===a.t0?16:"unread-count-single"===a.t0?19:"send-message"===a.t0?22:25;break;case 16:return a.next=18,(0,e.spawn)(Ke.doRefreshTotalUnreadConversationsCount,u);case 18:return a.abrupt("break",25);case 19:return a.next=21,(0,e.spawn)(doRefreshSingleShopUnreadConversationCount,u);case 21:return a.abrupt("break",25);case 22:return a.next=24,(0,e.put)((0,Ke.resendMessageRequested)(u));case 24:return a.abrupt("break",25);case 25:a.next=10;break;case 27:a.next=32;break;case 29:a.prev=29,a.t1=a.catch(8),r.e(a.t1);case 32:return a.prev=32,r.f(),a.finish(32);case 35:a.next=39;break;case 37:a.prev=37,a.t2=a.catch(0);case 39:case"end":return a.stop()}}),Xu,null,[[0,37],[8,29,32,35]])}function ta(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,e.takeEvery)(zu,ea);case 2:case"end":return t.stop()}}),Ju)}function ra(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var na=(0,j.handleActions)(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ra(Object(r),!0).forEach((function(t){A(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ra(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},qu),{verifyRequests:[]}),oa=[ta],ca=function(e){return e.captchaVerifyReducer.verifyRequests},ua=regeneratorRuntime.mark(aa);function aa(t,r,n){return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,(0,e.takeEvery)(t,regeneratorRuntime.mark((function t(o){var c;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(c=o.payload.id){t.next=5;break}return t.next=4,(0,e.call)(r,o);case 4:return t.abrupt("return");case 5:return t.next=7,(0,e.race)({task:(0,e.call)(r,o),cancel:(0,e.take)((function(e){return e.type===n.toString()&&e.payload.id===c}))});case 7:case"end":return t.stop()}}),t)})));case 2:case"end":return o.stop()}}),ua)}}(),S}())},53402:function(e,t,r){"use strict";e.exports=r(88377)}}]);