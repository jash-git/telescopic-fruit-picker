(self.miniJsonp=self.miniJsonp||[]).push([[2143],{57387:function(e,t,n){"use strict";n.r(t),n.d(t,{createPortal:function(){return a},findDOMNode:function(){return i},flushSync:function(){return s},hydrate:function(){return u},render:function(){return c},unmountComponentAtNode:function(){return o},unstable_batchedUpdates:function(){return l}});var r=window.ReactDom,a=r.createPortal,o=r.unmountComponentAtNode,c=r.render,i=r.findDOMNode,s=r.flushSync,u=r.hydrate,l=r.unstable_batchedUpdates;t.default=r},501:function(e,t,n){"use strict";n.d(t,{t:function(){return a}});var r=n(58518),a=r.default.t.bind(r.default)},38257:function(e,t,n){"use strict";n(53426),n(62850),n(62773);var r=n(29494),a="TW",o="live";(0,r.init)(a,o,"8.2.0"),window.addExternalGlobal=function(e,t){if(window.__CHAT_GLOBAL__||(window.__CHAT_GLOBAL__={}),window.__CHAT_GLOBAL__[e])throw Error("Already Added!");window.__CHAT_GLOBAL__[e]=t},n.p="https://".concat(location.host.includes("cn")?"deo.shopeesz.com":"deo.shopeemobile.com","/shopee/shopee-seller-").concat(o,"-").concat(a.toLowerCase(),"/chateasy/");var c=n(86843),i=n(57387),s=n(55036),u=n(57209),l=n(44900),d=(n(27476),n(95767),n(98837),n(94882),n(98351),n(4942)),f=n(70885),m=n(53402),p=n(66633),h=n(96961),v=n(38104);function w(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?w(Object(n),!0).forEach((function(t){(0,d.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var y=null,E=null,C="";window.addEventListener("message",(function(e){e.data.received&&window.clearInterval(E)}),!1);var b=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:window,r=(0,c.useRef)();(0,c.useEffect)((function(){r.current=t}),[t]),(0,c.useEffect)((function(){if(n&&n.addEventListener){var t=function(e){return r.current(e)};return n.addEventListener(e,t),function(){n.removeEventListener(n,t)}}}),[e,n])},S=n(20590),_=n.n(S),R={"chat-container":"aRLAkB8Zrm",chatContainer:"aRLAkB8Zrm",counts:"gAiLALcDL7",logo:"MMvRRRsryi",expandContainer:"GIWCwJZJzG",hover:"Z27mpOy85y","chaticon-wrapper":"Gf04Aiojki",chaticonWrapper:"Gf04Aiojki","chat-icon":"jZzeCQHIzA",chatIcon:"jZzeCQHIzA",root:"CDfxbn4ZiJ",hasUnread:"uZjpaOVZLe",jump:"j0lWW1yiAZ","jump-hover":"NuUu0k527Z",jumpHover:"NuUu0k527Z",jumpbar:"Oaw6LpGsn6","status-dot":"qkN6EH0q3W",statusDot:"qkN6EH0q3W",noUnread:"IZKX0usVWk",white:"L7EAUoJKzm",red:"obWep1e_86",windowContainer:"ZbkI8cjmb1",hint:"_XSJ6AR_TF",hintFooter:"Vwk9C74cna",btn:"WRwluoypn9","hide-btn":"XOHLYgO_ci WRwluoypn9",hideBtn:"XOHLYgO_ci WRwluoypn9","reply-btn":"apIkMBLaHt WRwluoypn9",replyBtn:"apIkMBLaHt WRwluoypn9"},k=n(29697),O=n(94184),N=n.n(O),P=n(41142),I=n.n(P),D=n(97139),T=n.n(D),U=n(87462),A=(n(19371),n(82139),n(15671)),j=n(43144),W=n(79340),L=n(82963),x=n(61120),q={root:"lmRE8vX68Q",show:"sd52AxPSGC",hide:"PJHbR_Yd2l",icon:"rN6EXEam8W",success:"W7qaOmRY0O",fail:"H8ClYudgH1",error:"eFxCzEILZ1",info:"aZ9QwlAfiP",warn:"U_lOTqvndI",message:"uM6AUh43Zu"},Z=n(96630),M=n(34652),B=n.n(M),H=n(86134),V=n.n(H),F=n(67838),G=n.n(F),X=n(89069),z=n.n(X);function J(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function K(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?J(Object(n),!0).forEach((function(t){(0,d.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):J(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Q(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,x.Z)(e);if(t){var a=(0,x.Z)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,L.Z)(this,n)}}var Y={transition:"opacity ".concat(200,"ms ease-in-out"),opacity:0},$={success:B(),fail:V(),error:V(),info:z(),warn:G()},ee={entering:{opacity:0},entered:{opacity:1},exiting:{opacity:1},exited:{opacity:0}},te=function(e){(0,W.Z)(n,e);var t=Q(n);function n(e){var r;return(0,A.Z)(this,n),(r=t.call(this,e)).state={show:!1},r.timer=null,r.eventListenerAdded=!1,r}return(0,j.Z)(n,[{key:"componentWillUnmount",value:function(){this.timer&&clearTimeout(this.timer)}},{key:"render",value:function(){var e=this,t=this.props.toast,n=t.type,r=t.message,a=this.state.show,o="".concat(q.root," ").concat(a?q.show:q.hide),i="".concat(q.icon," ").concat(q[n]),s=$[n];return c.default.createElement(Z.ZP,{in:a,timeout:200,addEndListener:function(t){e.eventListenerAdded||(t.addEventListener("transitionend",(function(){e.state.show&&(e.timer&&clearTimeout(e.timer),e.timer=setTimeout((function(){e.setState({show:!1},(function(){e.timer&&clearTimeout(e.timer),e.props.setToastInformation({toast:{type:"",message:"",show:!1}})}))}),1500))}),!1),e.eventListenerAdded=!0)}},(function(e){return c.default.createElement("div",{className:o,style:K(K({},Y),ee[e])},s&&c.default.createElement(_(),{svg:s,className:i}),c.default.createElement("div",{className:q.message},r))}))}}],[{key:"getDerivedStateFromProps",value:function(e){var t=e.toast,n=t.message,r=t.show;return n?r?{show:r}:null:{show:!1}}}]),n}(c.default.PureComponent),ne=n.p+"1d65e1b1865219c9d05f.png",re="gEBiGsPtJy",ae="yyHKyYrvkA",oe="ZAV0ULHaxr",ce="auAKC8Ldbh",ie="OnSxgsQlfi",se=n(501).t,ue=function(){return c.default.createElement("div",{className:re},c.default.createElement("div",{className:ae},c.default.createElement("img",{className:oe,src:ne}),c.default.createElement("div",{className:ce},se("common.error.hint_text")),c.default.createElement("div",{className:ie,onClick:function(){window.location.reload()}},se("common.error.reload"))))},le="gLbzKNEAYF",de="Mj9lh6KccD",fe="WHIaShCfot",me="QDLp_uN4bC",pe=n(23018),he=n.n(pe),ve=n(84962),we=n.n(ve),ge=(n(6059),n(97326)),ye="hczDQaHbc3",Ee="Ht2E1kwC5D",Ce="bAKwNuP3ME",be=n(94138),Se=n.n(be),_e=n(501).t;function Re(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,x.Z)(e);if(t){var a=(0,x.Z)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,L.Z)(this,n)}}var ke,Oe=function(e){(0,W.Z)(n,e);var t=Re(n);function n(e){var r;return(0,A.Z)(this,n),(r=t.call(this,e)).state={hasError:!1},r.handleReload=r.handleReload.bind((0,ge.Z)(r)),r}return(0,j.Z)(n,[{key:"componentDidCatch",value:function(){this.setState({hasError:!0})}},{key:"handleReload",value:function(){window.location.reload()}},{key:"render",value:function(){var e=this.props,t=e.children,n=e.shouldShowErrorPic,r=c.default.createElement("div",{className:ye},n&&c.default.createElement(_(),{svg:Se(),className:Ee}),c.default.createElement("div",null,_e("common.error.load_failed"),c.default.createElement("span",{className:Ce,onClick:this.handleReload},_e("common.error.reload"))));return this.state.hasError?r:t}}]),n}(c.default.Component),Ne="EGGLy1QwiK",Pe="iTrdMlUViL",Ie="JVrP6W1yHV",De="lm0LkZVj3H",Te="tGULtQDa1B",Ue="cq5bdsI9t0",Ae="bUDk9CxOKh",je="X6WsSex6SN",We=n(501).t,Le=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=function(){switch(t.name){case"profile":return c.default.createElement("div",{className:Ne},c.default.createElement(we(),{half:!0}));case"input-field":return c.default.createElement("div",{className:De},c.default.createElement(we(),{half:!0,className:Te}),c.default.createElement("div",{className:N()(Pe,Ae)},c.default.createElement("div",{className:Ie},c.default.createElement(we(),{type:"square",className:Ue}),c.default.createElement(we(),{type:"square",className:Ue}),c.default.createElement(we(),{type:"square",className:Ue}),c.default.createElement(we(),{type:"square",className:Ue}),c.default.createElement(we(),{type:"square",className:Ue})),c.default.createElement(we(),{type:"square",className:Ue})));default:return c.default.createElement("div",{className:je},c.default.createElement(he(),{isInit:!0,text:We(t.loadingKey)||""}))}};return function(r){var a=n(),o="message-section"===t.name;return c.default.createElement(Oe,{shouldShowErrorPic:o},c.default.createElement(c.Suspense,{fallback:a},c.default.createElement(e,r)))}},xe=Le((0,c.lazy)((function(){return Promise.all([n.e(8469),n.e(311),n.e(9159),n.e(5623),n.e(7425),n.e(9360),n.e(4489),n.e(6622),n.e(7625),n.e(6845)]).then(n.t.bind(n,67625,23))})),{name:"profile"}),qe=Le((0,c.lazy)((function(){return Promise.all([n.e(8469),n.e(3093),n.e(9453),n.e(311),n.e(785),n.e(963),n.e(7917),n.e(5177),n.e(3101),n.e(7425),n.e(7106),n.e(8058),n.e(7042),n.e(5009),n.e(1395),n.e(9467),n.e(7520),n.e(6700),n.e(9360),n.e(4489),n.e(6622),n.e(176),n.e(664)]).then(n.t.bind(n,39725,23))})),{name:"input-field"}),Ze=Le((0,c.lazy)((function(){return Promise.all([n.e(8469),n.e(3093),n.e(9453),n.e(4488),n.e(785),n.e(9159),n.e(9414),n.e(7917),n.e(6737),n.e(3962),n.e(5144),n.e(6008),n.e(5414),n.e(8846),n.e(6462),n.e(4307),n.e(3378),n.e(6308),n.e(7905),n.e(6051),n.e(3301),n.e(5177),n.e(3101),n.e(7106),n.e(8058),n.e(7042),n.e(5009),n.e(1395),n.e(7745),n.e(9467),n.e(4322),n.e(5814),n.e(3138),n.e(9360),n.e(4489),n.e(6622),n.e(4442),n.e(1091),n.e(374)]).then(n.t.bind(n,84442,23))})),{name:"message-section",loadingKey:"common.loading"}),Me=Le((0,c.lazy)((function(){return n.e(2238).then(n.t.bind(n,65574,23))})),{name:"dropper"}),Be=function(e){var t=(0,c.useState)(!1),n=(0,f.Z)(t,2),a=n[0],o=n[1],i=(0,c.useState)([]),s=(0,f.Z)(i,2),u=s[0],l=s[1],d=e.shop,m=e.currentUser,p=e.currentBuyer,v=e.isSubAccount,w=e.currentConversation,g=e.changeConversationStatusRequested,y=e.drawerMedias,E=e.hasVideoPermission,C=e.setToastInformation,b=e.muteConversationRequested,S=e.shopStatistics,_=function(e){e.preventDefault(),a&&o(!1)},R=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"fail";C({toast:{show:!0,type:t,message:e}})};return c.default.createElement(c.default.Fragment,null,c.default.createElement("div",{className:le},c.default.createElement(xe,{shop:d,currentUser:m,currentBuyer:p,isSubAccount:v,currentConversation:w,muteConversationRequested:b,shopStatistics:S})),c.default.createElement("div",{className:de,onDragEnter:function(e){e.preventDefault(),!a&&o(!0)}},a&&c.default.createElement(Me,{onSuccess:function(e){var t=w.id,n=w.shop_id;l(e),(0,h.$tracker)({operation:r.TrackerOperation.ACTION_DRAG_VIDEO,section:"conversation_window",data:{conversation_id:t},shopId:n})},onDragOver:function(e){return e.preventDefault()},onDragLeave:_,onDrop:_,receiverName:w.to_name,hasVideoPermission:E,currentMediaNum:y.length,onError:R}),c.default.createElement("div",{id:"messagesContainer",className:fe},c.default.createElement(Ze,{currentUser:m,currentConversation:w})),c.default.createElement("div",{className:me,style:{minHeight:"".concat(r.MINI_MIN_TEXT_BOX_HEIGHT,"px")}},c.default.createElement(qe,{shop:d,currentUser:m,currentBuyer:p,isSubAccount:v,drawerMedias:y,draggedMedias:u,hasVideoPermission:E,currentConversation:w,handleErrorWithToast:R,changeConversationStatusRequested:g}))))},He={muteConversationRequested:p.muteConversationRequested},Ve=(0,s.connect)((function(e,t){var n=t.currentConversation,r=n.to_id,a=n.shop_id;return{drawerMedias:(0,p.mediaListSelector)(e),hasVideoPermission:(0,m.hasVideoPermissionSelector)(e),shop:(0,p.currentConversationShopSelectors)(e),shopStatistics:(0,m.shopStatisticsSelector)(r,a)(e)}}),He)(Be),Fe=n(63662),Ge=n.n(Fe),Xe=n(78640),ze=n.n(Xe),Je=(n(75929),n(35519),n(6646)),Ke=n.n(Je),Qe=n(79968),Ye=n.n(Qe),$e=n(43671),et=n.n($e),tt=n(97436),nt=n.n(tt),rt=n(6480),at=n.n(rt),ot=n(1214),ct=n.n(ot),it=n.p+"df95536186a5d658263c.png",st="E1p2ARHhtj",ut="elvJjCo914",lt="qGQqO_DNoK",dt=function(e){var t=e.children,n=e.content,r=e.placement,a=(0,c.useState)(!1),o=(0,f.Z)(a,2),i=o[0],s=o[1];return c.default.createElement("div",{className:st,onMouseEnter:function(){s(!0)},onMouseLeave:function(){s(!1)}},t,i&&c.default.createElement("div",{className:N()(ut,(0,d.Z)({},lt,"center"===r))},n))},ft={container:"UvGSSkd1qQ",header:"PBqe51NF33",windows:"Z8RjJZsXy1","logo-wrapper":"Ffl5D3J1YM",logoWrapper:"Ffl5D3J1YM",logo:"tH3c0fxDcu","operator-wrapper":"zhhA1X0YeX",operatorWrapper:"zhhA1X0YeX","operator-item-wrapper":"b4WLaPHvaN",operatorItemWrapper:"b4WLaPHvaN","operator-item":"X8XVK1EpGd",operatorItem:"X8XVK1EpGd","show-dialog":"cBwU5LVKk8 X8XVK1EpGd",showDialog:"cBwU5LVKk8 X8XVK1EpGd","hide-dialog":"MSU7d8LTb3 X8XVK1EpGd",hideDialog:"MSU7d8LTb3 X8XVK1EpGd",minimize:"uhPpW_bDvZ X8XVK1EpGd",unread:"t0DSoDjLOv","unread-open":"GQqiEMsjau",unreadOpen:"GQqiEMsjau","unread-close":"sCTuxhWsM6",unreadClose:"sCTuxhWsM6",details:"C8Jzw7jkTU","half-container":"eB3tTukA7J UvGSSkd1qQ",halfContainer:"eB3tTukA7J UvGSSkd1qQ",blank:"lBcVbnezbE","hide-blank":"qqqFtuT3WF",hideBlank:"qqqFtuT3WF",maxBlank:"AJGGbveN2k",plate:"t6aX8KMaL1",image:"zMIcJ6vtsM","error-image":"y1awX1FEiw",errorImage:"y1awX1FEiw",title:"YN8sHjfMB4","blank-title":"D_bmite0fe YN8sHjfMB4",blankTitle:"D_bmite0fe YN8sHjfMB4",reload:"nG2T6V5_Ra","error-img":"pRa93I89hk",errorImg:"pRa93I89hk","error-title":"j0EIXydtVc YN8sHjfMB4",errorTitle:"j0EIXydtVc YN8sHjfMB4"},mt=n(501).t,pt=Le((0,c.lazy)((function(){return Promise.all([n.e(8469),n.e(3093),n.e(9453),n.e(311),n.e(4488),n.e(7917),n.e(5177),n.e(3101),n.e(7425),n.e(7106),n.e(8058),n.e(7745),n.e(7059),n.e(9360),n.e(4489),n.e(6622),n.e(9978),n.e(8050)]).then(n.t.bind(n,72577,23))})),{name:"conversations"}),ht={minimize:Ge(),hideDialog:at(),showDialog:nt()},vt=function(e){var t=e.newbie,n=e.currentUser,a=e.isSubAccount,o=e.currentBuyer,i=e.loginSuccess,s=e.totalUnreadCount,u=e.showConversationDetail,l=e.currentConversation,d=e.updateGuideRequested,f=(e.updateUserRequested,e.setToastInformation),m=e.toast,p=e.updateChatWindowStatus,v=e.changeConversationStatusRequested,w=e.updateConversationDetailStatus,g=e.filter,y=e.conversationBeenDeleted,E=e.markMessagesRequested;(0,c.useEffect)((function(){(0,h.$tracker)({operation:r.TrackerOperation.VIEW,data:{tab_name:g.toLowerCase()}})}),[g]);var C,b={key:"minimize",tip:"header.tooltip.minimize",icon:"minimize",handler:function(e){p({showChatWindow:!1}),(0,h.$tracker)({type:"close_button"})}},S=(n.distribution_status,n.locale),R=["tw","cn"].includes((0,r.getServiceLocale)(S));return c.default.createElement("div",{style:{},className:u?ft.container:ft.halfContainer},c.default.createElement("div",{className:ft.header},c.default.createElement("div",{className:ft.logoWrapper},c.default.createElement(_(),{svg:R?et():ze(),className:ft.logo}),!!s&&c.default.createElement("div",{className:ft.unread},c.default.createElement(_(),{svg:Ke(),className:ft.unreadOpen}),s,c.default.createElement(_(),{svg:Ye(),className:ft.unreadClose}))),(C=[],u?C.push({key:"hideDialog",tip:"header.tooltip.close_dialog",icon:"hideDialog",handler:function(e){w({showConversationDetail:!1}),(0,h.$tracker)({type:"fold_button"})}}):C.push({key:"showDialog",tip:"header.tooltip.open_dialog",icon:"showDialog",handler:function(e){var t,n,r,a,o;w({showConversationDetail:!0}),n=(t=l||{}).id,r=t.status,a=t.unread_count,o=t.latest_message_id,n&&"closed"!==r&&a>0&&E({conversationId:n,isRead:!0,latestMessageId:o}),(0,h.$tracker)({type:"unfold_button"})}}),C.push(b),c.default.createElement("div",{className:ft.operatorWrapper},C.map((function(e){return c.default.createElement("div",{key:e.key,className:ft.operatorItemWrapper},c.default.createElement(dt,{content:mt(e.tip)},c.default.createElement(_(),{svg:ht[e.icon],className:ft[e.icon],onClick:e.handler})))}))))),c.default.createElement("div",{className:ft.windows},function(){var e={currentUser:n,isSubAccount:a,currentConversation:l};if(i){return"blank_page.pcmall_title",c.default.createElement(c.default.Fragment,null,c.default.createElement(te,{toast:m,setToastInformation:f}),c.default.createElement(pt,(0,U.Z)({newbie:t,updateGuideRequested:d},e)),c.default.createElement("div",{className:ft.details},l.id?c.default.createElement(Ve,(0,U.Z)({setToastInformation:f,currentBuyer:o,changeConversationStatusRequested:v},e)):c.default.createElement("div",{className:"".concat(ft.blank," ").concat(u?"":ft.hideBlank)},y?c.default.createElement(c.default.Fragment,null,c.default.createElement("div",{className:ft.errorImg},c.default.createElement("img",{src:it,className:ft.image})),c.default.createElement("div",{className:ft.errorTitle},mt("conversation.server_error.deleted"))):c.default.createElement(c.default.Fragment,null,c.default.createElement(_(),{svg:ct(),className:ft.plate}),c.default.createElement("div",{className:ft.blankTitle},mt("blank_page.pcmall_title"))))))}return c.default.createElement(ue,null)}()))},wt={updateUserRequested:m.updateUserRequested,setToastInformation:m.setToastInformation,updateGuideRequested:m.updateGuideRequested,updateChatWindowStatus:m.updateChatWindowStatus,updateConversationDetailStatus:m.updateConversationDetailStatus,changeConversationStatusRequested:p.changeConversationStatusRequested,markMessagesRequested:p.markMessagesRequested},gt=(0,s.connect)((function(e){return{newbie:(0,m.newbieSelector)(e),toast:(0,m.toastSelector)(e),currentUser:(0,m.currentUserSelector)(e)||{},currentBuyer:(0,p.currentBuyerSelector)(e)||{},isSubAccount:(0,m.isSubAccountSelector)(e),loginSuccess:(0,m.loginSuccessSelector)(e),totalUnreadCount:(0,m.totalUnreadConversationsCountSelector)(e),currentConversation:(0,p.currentConversationSelector)(e),currentConversationId:(0,p.currentConversationIdSelector)(e),showConversationDetail:(0,m.showConversationDetailSelector)(e),filter:(0,p.filterSelector)(e),conversationBeenDeleted:(0,p.conversationBeenDeletedSelector)(e)}}),wt)((function(e){return c.default.createElement(vt,e)})),yt=n(501).t,Et=function(e){var t,n=e.showEntry,r=(e.isSubAccount,e.showChatWindow),a=e.hasUnread,o=e.handleClickEntry,i=e._counts,s=e.isCNUser,u=e.hasPermission,l=e.showDuesoonHint,m=e.handleHideHint,p=e.handleClickReplyNow,v=e.showConversationDetail,w=e.transitionClasses,g=e.setShowDuesoonHint,y=e.theme,E=e.updateChatWindowStatus,C=(0,c.useState)(!1),b=(0,f.Z)(C,2),S=b[0],O=b[1],P=(0,c.useState)(0),D=(0,f.Z)(P,2),U=(D[0],D[1]),A=(0,c.useRef)(null),j=null===(t="number"==typeof i?String(i):i)||void 0===t?void 0:t.length;(0,c.useEffect)((function(){if(n){var e=Date.now()-window.__START_MINICHAT__;if((0,h.collectComponentTask)(h.ReportComponent.APP,{duration:e,id:h.ReportPoint.SHOW_WEBCHAT}),A.current){var t=A.current.getBoundingClientRect();U(t.width)}}}),[n]),(0,c.useEffect)((function(){r&&l&&g(!1)}),[r]);var W="\n    ".concat(R.root,"\n    ").concat(a?R.hasUnread:R.noUnread,"\n    ").concat(R[y],"\n  "),L="\n    ".concat(R.counts,"\n    ").concat(2===j?R.twoText:3===j?R.threeText:"","\n  ");return c.default.createElement("div",{className:R.chatContainer},c.default.createElement("div",{className:W,onClick:function(){r?E({showChatWindow:!1}):(O(!1),o())},onMouseEnter:function(){r||O(!0)},onMouseLeave:function(){O(!1)}},c.default.createElement("div",{className:R.chaticonWrapper},c.default.createElement(_(),{svg:"red"===y?I():T(),className:R.chatIcon})),a&&c.default.createElement("div",{className:L},i),c.default.createElement("div",{className:N()(R.expandContainer,(0,d.Z)({},R.hover,S)),style:{width:S?75:0},ref:A},c.default.createElement("div",{className:R.logo},s?"聊聊":"Chat"))),u&&l&&c.default.createElement("div",{className:R.hint},yt("entry.crr_reminder"),c.default.createElement("div",{className:R.hintFooter},c.default.createElement("div",{className:R.hideBtn,onClick:m},yt("common.maybe_later")),c.default.createElement("div",{className:R.replyBtn,onClick:p},yt("common.reply_now")))),c.default.createElement(k.Z,{unmountOnExit:!0,in:r,timeout:v?300:225,classNames:w,onEnter:null},c.default.createElement("div",{className:R.windowContainer},c.default.createElement(gt,null))))},Ct=n(3488),bt=n.n(Ct),St={"logo-wrapper":"r2v9ozyahe",logoWrapper:"r2v9ozyahe",logo:"HiSJ3Vx2WM",chat:"m3Mb2Tqdlw",counts:"v_6qeRY1jW",root:"bGX0VV9OFp",hasUnread:"nAERRUqs_I",jump:"P_7D65k6v8",jumpbar:"lCHLPQcY1b",noUnread:"VMBV0_VURc",white:"t9J4UYN3jm",red:"m_VOzMbX6j",hint:"gG0vfe2rzi",hintFooter:"xlItAfgC0G",btn:"hWgLq9FUmR","hide-btn":"Qo96nl_Au8 hWgLq9FUmR",hideBtn:"Qo96nl_Au8 hWgLq9FUmR","reply-btn":"UPQ8yWSGDT hWgLq9FUmR",replyBtn:"UPQ8yWSGDT hWgLq9FUmR",error:"EU5AP2w2pW"},_t=n(501).t,Rt=function(e){var t=e.showEntry,n=e.showEntryButton,r=(e.isSubAccount,e.showChatWindow),a=e.hasUnread,o=e.handleClickEntry,i=e._counts,s=e.isCNUser,u=e.hasPermission,l=e.showDuesoonHint,d=e.handleHideHint,f=e.handleClickReplyNow,m=e.setShowEntryButton,p=e.showConversationDetail,v=e.transitionClasses,w=e.theme;(0,c.useEffect)((function(){if(t){var e=Date.now()-window.__START_MINICHAT__;(0,h.collectComponentTask)(h.ReportComponent.APP,{duration:e,id:h.ReportPoint.SHOW_WEBCHAT})}}),[t]);var g="\n    ".concat(St.root,"\n    ").concat(a?St.hasUnread:St.noUnread,"\n    ").concat(St[w],"\n  ");return c.default.createElement(c.default.Fragment,null,n&&c.default.createElement("div",{className:g},c.default.createElement("div",{className:St.logoWrapper,onClick:o},a&&c.default.createElement("div",{className:St.counts},i),c.default.createElement(_(),{svg:bt(),className:St.chat}),c.default.createElement(_(),{svg:s?et():ze(),className:St.logo})),u&&l&&c.default.createElement("div",{className:St.hint},_t("entry.crr_reminder"),c.default.createElement("div",{className:St.hintFooter},c.default.createElement("div",{className:St.hideBtn,onClick:d},_t("common.maybe_later")),c.default.createElement("div",{className:St.replyBtn,onClick:f},_t("common.reply_now"))))),c.default.createElement(k.Z,{unmountOnExit:!0,in:r,timeout:p?300:225,classNames:v,onEnter:null,onExited:function(){return m(!0)}},c.default.createElement(gt,null)))},kt="VZURjZgd48",Ot="gZSXuTECya",Nt="aBmy1g8C28",Pt="hG2kVJ1aJ0",It="kFb4ptXBeH",Dt="glVxPVStQE",Tt="TylLzJLLTu glVxPVStQE",Ut="zWxOU2Js04 glVxPVStQE";function At(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function jt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?At(Object(n),!0).forEach((function(t){(0,d.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):At(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Wt={updateCurTabFocused:m.updateCurTabFocused,updateChatWindowStatus:m.updateChatWindowStatus,initConversationRequested:p.initConversationRequested,closeConnection:v.closeConnectionRequested},Lt=(0,s.connect)((function(e){return{newbie:(0,m.newbieSelector)(e),showEntry:(0,m.showEntrySelector)(e),currentUser:(0,m.currentUserSelector)(e)||{},isSubAccount:(0,m.isSubAccountSelector)(e),loginSuccess:(0,m.loginSuccessSelector)(e),socketFeedback:(0,p.feedbackSelector)(e),showChatWindow:(0,m.showChatWindowSelector)(e),totalUnreadCount:(0,m.totalUnreadConversationsCountSelector)(e),showConversationDetail:(0,m.showConversationDetailSelector)(e),isMainPage:(0,m.isMainPageSelector)(e),hasFetchedUnread:(0,m.hasFetchedUnreadSelector)(e),curTabFocused:(0,m.curTabFocusedSelector)(e),totalConversationsCount:(0,p.totalConversationsCountSelector)(e),subaccountHasUnrepliedPermission:(0,m.subaccountHasUnrepliedPermissionSelector)(e),showCrrDue:(0,m.showCrrDueSelector)(e)}}),Wt)((function(e){var t=e.isUseNewEntryUI,n=e.showEntry,a=e.currentUser,o=e.isSubAccount,i=e.loginSuccess,s=e.socketFeedback,u=e.showChatWindow,l=e.totalUnreadCount,d=e.showConversationDetail,m=e.updateChatWindowStatus,p=e.updateCurTabFocused,v=(e.isMainPage,e.hasFetchedUnread),w=e.curTabFocused,S=e.totalConversationsCount,_=e.subaccountHasUnrepliedPermission,R=e.showCrrDue,k=e.initConversationRequested,O=(e.closeConnection,l>0),N=S.duesoonCount,P=a.locale,I=(0,c.useState)(!0),D=(0,f.Z)(I,2),T=D[0],U=D[1],A=(0,c.useRef)(l),j=(0,c.useState)(""),W=(0,f.Z)(j,2),L=W[0],x=W[1],q=(0,c.useRef)(N),Z=(0,c.useState)(!1),M=(0,f.Z)(Z,2),B=M[0],H=M[1],V=(0,c.useState)(!1),F=(0,f.Z)(V,2),G=F[0],X=F[1],z=R&&(!o||_),J=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};(0,h.$tracker)({type:e,operation:t,data:jt({ctx_url:window.location.href,unread_convo_cnt:l},n),page:"seller_center_chat"})};(0,c.useEffect)((function(){J("chat_icon_non_animation",r.TrackerOperation.IMPRESSION,{has_unread_convo:!!l})}),[]);var K,Q,Y,$=(K=function(e){p({focused:e})},Q=100,Y=null,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];Y&&(clearTimeout(Y),Y=null),Y=setTimeout((function(){K.apply(void 0,t)}),Q)});(0,c.useEffect)((function(){var e=A.current;T&&0===e&&l>0&&v&&w&&(0,h.$tracker)({type:"chat_icon_status_change_to_with_unread_cnt",operation:r.TrackerOperation.IMPRESSION,data:{ctx_url:window.location.href},page:"seller_center_chat"}),x(l>0?"red":"white"),A.current=l}),[l]),b("focus",(function(){return $(!0)})),b("blur",(function(){return $(!1)})),(0,c.useEffect)((function(){u&&U(!1)}),[u]),(0,c.useEffect)((function(){if(z){var e=q.current;N>e&&(B||(H(!0),J("chat_icon_reminder",r.TrackerOperation.IMPRESSION)),X(!0)),q.current=N}}),[N]),(0,c.useEffect)((function(){G&&(J("chat_icon_animation",r.TrackerOperation.IMPRESSION),X(!1),ke=window.setInterval((function(){x((function(e){return"red"!==e&&e?"red":"white"}))}),500),window.setTimeout((function(){ke&&clearInterval(ke),ke=null,x(A.current>0?"red":"white")}),3400))}),[G]);var ee=["tw","cn"].includes((0,r.getServiceLocale)(P)),te=l>99?"99+":l,ne=(0,c.useMemo)((function(){var e={enter:kt,enterActive:Nt,exit:It,exitActive:Dt};return e.exitActive=Tt,d||((e=jt(jt({},e),{},{enter:Ot,enterActive:Pt})).exitActive=Ut),e}),[d]);if(!n)return null;var re=t?Et:Rt;return c.default.createElement(re,{showEntryButton:T,showEntry:n,isSubAccount:o,showChatWindow:u,hasUnread:O,handleClickEntry:function(){var e=!s||s.status===r.SocketToAlertType.resolved;i&&e&&J("chat_icon",r.TrackerOperation.CLICK,{has_unread_convo:!!l,is_animation:!!ke}),m({showChatWindow:!0}),k({})},_counts:te,isCNUser:ee,hasPermission:z,showDuesoonHint:B,handleHideHint:function(){H(!1),J("chat_icon_reminder_mayber_later",r.TrackerOperation.CLICK)},handleClickReplyNow:function(){var e,t,n,a,o;H(!1),J("chat_icon_reminder_reply_now",r.TrackerOperation.CLICK),e={currentConversation:{},webChatUrl:(0,r.getWebChatUrl)(),source:"replyNow"},t=e.currentConversation,n=void 0===t?{}:t,a=e.webChatUrl,o=e.source,(0,r.getItem)("mini-sc_redirect").then((function(e){e&&e.conversationId===n.id||(e={shopId:n.shop_id,userId:n.to_id});var t=g(g({},e),{},{type:"MiniChatRedirect"});o&&(t.miniSource=o),y&&!y.closed?(C!==a&&(y.location.href=a),y.focus()):(t.showConvsBeforePreload=!0,y=window.open("".concat(a),"_blank")),C=a,E&&window.clearInterval(E),E=window.setInterval((function(){try{y.postMessage(t,a)}catch(e){y=null,window.clearInterval(E)}}),1e3)}))},setShowEntryButton:U,showConversationDetail:d,transitionClasses:ne,theme:L,setShowDuesoonHint:H,updateChatWindowStatus:m})}));(0,h.initMDAPSdk)();var xt=function(e,t){l.store.getState().userReducer.loginSuccess?e():(l.store.dispatch((0,m.updateChatWindowStatus)({showChatWindow:!0})),l.store.dispatch((0,p.initConversationRequested)({})),t&&t(r.StartChatErrorCode.Login))},qt={sellerChatInit:function(e){var t=e.isUseNewEntryUI;qt.create("shopee-mini-chat-embedded",t)},create:function(e,t){var n=document.getElementById(e);if(!n){(n=document.createElement("div")).setAttribute("id",e);var r,a={position:"fixed",zIndex:"99999",right:"8px",bottom:"0"};for(r in a)n.style[r]=a[r];document.body.appendChild(n)}window.miniChatContainerId=e,function(e,t,n){i.default.render(c.default.createElement(u.zj,null,c.default.createElement(s.Provider,{store:l.store},c.default.createElement(e,{isUseNewEntryUI:n}))),document.getElementById(t))}(Lt,e,t)},startOrderChat:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};xt((function(){l.store.dispatch((0,p.redirectConversationRequested)({userId:t,shopId:e,orderId:n,entryPointType:r.entryPoint}))}))},startChatWithText:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};xt((function(){l.store.dispatch((0,p.redirectConversationRequested)({userId:e,message:t,entryPointType:n.entryPoint}))}))},startChat:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};xt((function(){l.store.dispatch((0,p.redirectConversationRequested)({userId:t,shopId:e,productId:n,entryPointType:r.entryPoint}))}))},startCommonChat:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};xt((function(){l.store.dispatch((0,p.redirectConversationRequested)({userId:t,shopId:e,entryPointType:{project_detail:3501,kol_marketplace_detail:3502,kol_marketplace:3503,top_five_affiliates:3504,key_metrics:3504,free_sample_detail:3505,affiliate_homepage:3506,key_metrics_detail_product:3507,key_metrics_detail_affiliate:3508,key_metrics_view_all_affiliate:3509}[n.entry],callback:n.onError}))}),n.onError)},minimizeChatWindow:function(){l.store.dispatch((0,m.updateChatWindowStatus)({showChatWindow:!1}))},inNewBie:function(){return!1},updateLoginStatus:function(){l.store.dispatch((0,m.loginRequested)())},logout:function(){l.store.dispatch((0,m.forceLogoutRequested)())},locateMessage:function(e,t){xt((function(){e&&t&&(l.store.dispatch((0,m.updateChatWindowStatus)({showChatWindow:!0})),l.store.dispatch((0,p.initConversationRequested)({})),l.store.dispatch((0,m.updateConversationDetailStatus)({showConversationDetail:!0})),l.store.dispatch((0,p.locationMessage)({msgId:e,shopId:t})))}))}};window.ChatEasy=qt,"function"==typeof window.chatReady?window.chatReady():qt.create("shopee-mini-chat-embedded",!0),qt.create("shopee-mini-chat-embedded")},53426:function(){performance&&performance.mark&&performance.mark("STATIC_LOADED")},44900:function(e,t,n){"use strict";n.r(t),n.d(t,{store:function(){return A}});var r=n(38250),a=n(38104),o=n(24360),c=n(85002),i=n(8279),s=n(42982),u=(n(35666),n(19371),n(34857)),l=n(53402),d=n(66633),f=(n(27476),n(95767),n(98837),n(94882),n(98351),n(4942)),m=n(70885);n(83276),n(62850),n(62773);function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var v=regeneratorRuntime.mark(g),w=regeneratorRuntime.mark(y);function g(e){var t;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t=e.payload.resource,n.t0="login"===t,!n.t0){n.next=5;break}return n.next=5,(0,u.put)((0,l.updateChatEntryStatus)({showEntry:!0}));case 5:return n.next=7,(0,u.put)((0,l.updateLoginSuccessStatus)({loginSuccess:!1}));case 7:return n.next=9,(0,u.put)((0,l.forceLogoutRequested)());case 9:case"end":return n.stop()}}),v)}function y(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,u.takeEvery)(l.handle401ErrorRequested,g);case 2:case"end":return e.stop()}}),w)}var E={blacklist:["userReducer"]},C={userReducer:l.userReducer,shopReducer:l.shopReducer,toastReducer:l.toastReducer,entityReducer:l.entityReducer,settingsReducer:l.settingsReducer,conversationReducer:d.conversationReducer,translatePreferenceReducer:l.translatePreferenceReducer,reportReducer:l.reportReducer,captchaVerifyReducer:l.captchaVerifyReducer},b=regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,u.all)([y].concat((0,s.Z)(l.watchUserSagas),(0,s.Z)(l.watchShopSagas),(0,s.Z)(l.watchToastSagas),(0,s.Z)(l.watchTranslationSagas),(0,s.Z)(d.watchConversationSagas),(0,s.Z)(l.watchReportSagas),(0,s.Z)(l.watchHandleUrlSagas),(0,s.Z)(l.watchSettingsSagas),(0,s.Z)(l.watchVerifySagas)).map(u.call));case 2:case"end":return e.stop()}}),e)})),S=n(29494),_=n(96961),R=regeneratorRuntime.mark(k);function k(e){var t;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:(t={operation:S.TrackerOperation.IMPRESSION,type:"chat_icon",data:{ctx_url:window.location.href,has_unread_convo:!!e,unread_convo_cnt:e}}).page="minichat_page",(0,_.$tracker)(t);case 3:case"end":return n.stop()}}),R)}var O=regeneratorRuntime.mark(I),N=regeneratorRuntime.mark(D),P={id:"uncontrolled",sagas:d.watchUncontrolledSagas,reducerMap:{},retain:!0};function I(e){var t;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,u.select)(l.waitingTimeFilterSelector);case 2:return t=n.sent,n.next=5,(0,u.call)(d.syncConversationFilter,e,t);case 5:case"end":return n.stop()}}),O)}function D(){var e,t,n,r;return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.prev=0,o.next=3,(0,u.call)(l.login);case 3:if(e=o.sent,t=e.session,n=e.params,A.addModule(P),!(r=t.user)){o.next=19;break}return o.next=11,(0,_.clearApiCache)();case 11:return o.next=13,(0,u.call)(l.handleLoginSucceededLogic,t,n);case 13:return o.next=15,(0,u.call)(I,r.id);case 15:return o.next=17,(0,u.put)((0,l.getGuideRequested)({userId:r.id,version:"8.2.0"}));case 17:return o.next=19,(0,u.put)((0,a.updateUnreadCount)({type:l.unreadCountActions.REFRESH_TOTAL_UNREAD_CONVERSATION_COUNT,source:S.UnreadSource.PRELOAD,callback:k}));case 19:o.next=26;break;case 21:return o.prev=21,o.t0=o.catch(0),console.error("[Load Chat Failed]\n",o.t0),o.next=26,(0,u.put)((0,l.updateLoginSuccessStatus)({loginSuccess:!1}));case 26:case"end":return o.stop()}}),N,null,[[0,21]])}var T=n(15861),U=function(){var e=(0,T.Z)(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=null,e.t0=t,e.next="input-field"===e.t0?4:"message-section"===e.t0?8:"profile"===e.t0?12:"socket"===e.t0?16:20;break;case 4:return e.next=6,Promise.all([n.e(8469),n.e(3093),n.e(9453),n.e(311),n.e(785),n.e(963),n.e(7917),n.e(5177),n.e(3101),n.e(7425),n.e(7106),n.e(8058),n.e(7042),n.e(5009),n.e(1395),n.e(9467),n.e(7520),n.e(6700),n.e(9360),n.e(4489),n.e(6622),n.e(176),n.e(664)]).then(n.t.bind(n,39725,23));case 6:case 10:case 14:case 18:return r=e.sent,e.abrupt("break",20);case 8:return e.next=10,Promise.all([n.e(8469),n.e(3093),n.e(9453),n.e(4488),n.e(785),n.e(9159),n.e(9414),n.e(7917),n.e(6737),n.e(3962),n.e(5144),n.e(6008),n.e(5414),n.e(8846),n.e(6462),n.e(4307),n.e(3378),n.e(6308),n.e(7905),n.e(6051),n.e(3301),n.e(5177),n.e(3101),n.e(7106),n.e(8058),n.e(7042),n.e(5009),n.e(1395),n.e(7745),n.e(9467),n.e(4322),n.e(5814),n.e(3138),n.e(9360),n.e(4489),n.e(6622),n.e(4442),n.e(1091),n.e(374)]).then(n.t.bind(n,84442,23));case 12:return e.next=14,Promise.all([n.e(8469),n.e(311),n.e(9159),n.e(5623),n.e(7425),n.e(9360),n.e(4489),n.e(6622),n.e(7625),n.e(6845)]).then(n.t.bind(n,67625,23));case 16:return e.next=18,Promise.all([n.e(5144),n.e(6008),n.e(5414),n.e(7638)]).then(n.t.bind(n,88600,23));case 20:return e.abrupt("return",r);case 21:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),A=(0,c.createStore)({advancedCombineReducers:function(e){return(0,r.combineReducers)(function(e,t){return Object.entries(t).reduce((function(t,n){var r=(0,m.Z)(n,2),a=r[0],o=r[1];return h(h({},t),{},(0,f.Z)({},a,(function(t,n){return n.type!=="".concat(l.reduxReset)||e.blacklist.includes(a)||(t=void 0),o(t,n)})))}),{})}(E,e))},enhancers:[],extensions:[{middleware:[o.dynamicMiddlewares]},(0,i.getSagaExtension)()]},{id:"root",reducerMap:C,sagas:[o.watchModuleAdded,b,D]});(0,o.addMiddleware)((0,o.dynamicModuleActionsMiddleware)({store:A,lazyImport:U,dynamicActions:a}))}},function(e){e.O(0,[2143],(function(){[8469,3093,9453,311,785,963,7917,5177,3101,7425,7106,8058,7042,5009,1395,9467,7520,6700,9360,4489,6622,176,664,4488,9159,9414,6737,3962,5144,6008,5414,8846,6462,4307,3378,6308,7905,6051,3301,7745,4322,5814,3138,4442,1091,374,5623,7625,6845,7638,7059,9978,8050,2238].map(e.E)}),5);var t=function(t){return e(e.s=t)};e.O(0,[4312,7917,2038,1493,881,4444,6435,8592,4997,6348,9360,4489,6622,5356],(function(){return t(63658),t(38257)}));e.O()}]);